<!DOCTYPE html>
<html lang="en" dir="ltr">
<!--
  ╔══════════════════════════════════════════════════════════════╗
  ║  XOPFLY — AI-Powered Tunisia Tourism Web App                ║
  ║  ARSII'26 Competition | Author: Moufez Khadhraoui | FSM     ║
  ║  Gemini AI Key: AIzaSyBV2CLqBruCWuOW07GFIhiqzhQVfLCu2D8   ║
  ║  Features: AI Trip Planner, Quiz, Hotels, Cars, Social,     ║
  ║            Itinerary Generator, AR, Multi-language           ║
  ╚══════════════════════════════════════════════════════════════╝
-->
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="XOPFLY — AI-powered Tunisia tourism. Discover destinations, book hotels, quizzes, social travel.">
  <title>XOPFLY — Discover Tunisia · AI-Powered Tourism</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>✈️</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=Epilogue:ital,wght@0,300;0,400;0,500;1,300&family=Noto+Sans+Arabic:wght@300;400;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">

  <style>
/* ═══════════════════════════════════════════════════════════════
   XOPFLY — Global Design System
   Tunisia Tourism App | ARSII'26 Competition
   ═══════════════════════════════════════════════════════════════ */

:root {
  --flame:    #FF4B1F;
  --amber:    #FFB347;
  --gold:     #F5C518;
  --teal:     #00BFA5;
  --ocean:    #0077B6;
  --night:    #07020F;
  --deep:     #0F0820;
  --mid:      #1A0D38;
  --surface:  #241650;
  --glass:    rgba(255,255,255,0.055);
  --glass-b:  rgba(255,255,255,0.1);
  --border:   rgba(255,255,255,0.08);
  --text:     #F0EBF8;
  --muted:    rgba(240,235,248,0.45);
  --radius:   18px;
  --radius-lg:28px;
  --radius-sm:10px;
  --shadow:   0 24px 80px rgba(0,0,0,0.5);
  --transition: cubic-bezier(0.23, 1, 0.32, 1);
}

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior: smooth; font-size:16px; }

body {
  font-family: 'Epilogue', sans-serif;
  background: var(--deep);
  color: var(--text);
  line-height: 1.6;
  min-height: 100vh;
  overflow-x: hidden;
  cursor: none;
}
body.rtl { direction: rtl; font-family: 'Noto Sans Arabic', 'Epilogue', sans-serif; }

/* ─── CUSTOM CURSOR ─── */
.cursor { width:10px; height:10px; background:var(--flame); border-radius:50%; position:fixed; pointer-events:none; z-index:99999; transform:translate(-50%,-50%); transition:transform 0.08s,width 0.2s,height 0.2s,background 0.2s; mix-blend-mode:screen; }
.cursor-follower { width:36px; height:36px; border:1.5px solid rgba(255,75,31,0.5); border-radius:50%; position:fixed; pointer-events:none; z-index:99998; transform:translate(-50%,-50%); transition:transform 0.18s var(--transition),width 0.3s,height 0.3s,border-color 0.3s; }
.cursor.hover { width:18px; height:18px; background:var(--gold); }
.cursor-follower.hover { width:56px; height:56px; border-color:rgba(245,197,24,0.4); }

/* ─── SCROLLBAR ─── */
::-webkit-scrollbar { width:4px; }
::-webkit-scrollbar-track { background:var(--deep); }
::-webkit-scrollbar-thumb { background:var(--flame); border-radius:100px; }

/* ─── TYPOGRAPHY ─── */
h1,h2,h3,h4,h5 { font-family:'Syne',sans-serif; font-weight:700; line-height:1.15; letter-spacing:-0.02em; }
a { color:inherit; text-decoration:none; }
button { cursor:none; }

/* ─── SPLASH SCREEN ─── */
#splash-screen { position:fixed; inset:0; z-index:10000; background:var(--night); display:flex; flex-direction:column; align-items:center; justify-content:center; transition:opacity 0.6s var(--transition),visibility 0.6s; }
#splash-screen.hidden { opacity:0; visibility:hidden; pointer-events:none; }
.splash-particles { position:absolute; inset:0; overflow:hidden; }
.particle { position:absolute; border-radius:50%; animation:floatParticle linear infinite; opacity:0; }
@keyframes floatParticle { 0%{transform:translateY(100vh) rotate(0deg);opacity:0;} 10%{opacity:0.6;} 90%{opacity:0.4;} 100%{transform:translateY(-20vh) rotate(720deg);opacity:0;} }
.splash-logo-wrap { position:relative; z-index:2; animation:splashEntrance 1s var(--transition) both; text-align:center; }
@keyframes splashEntrance { from{opacity:0;transform:scale(0.7) translateY(30px);} to{opacity:1;transform:scale(1) translateY(0);} }
.splash-arsii-badge { display:flex; align-items:center; justify-content:center; gap:12px; margin-bottom:32px; }
.arsii-logo-circle { width:72px; height:72px; border-radius:20px; background:linear-gradient(135deg,var(--flame),var(--amber)); display:flex; align-items:center; justify-content:center; font-family:'Syne',sans-serif; font-weight:800; font-size:22px; color:#fff; box-shadow:0 0 40px rgba(255,75,31,0.5),0 0 80px rgba(255,75,31,0.2); animation:glowPulse 2s ease-in-out infinite; }
@keyframes glowPulse { 0%,100%{box-shadow:0 0 40px rgba(255,75,31,0.5),0 0 80px rgba(255,75,31,0.2);} 50%{box-shadow:0 0 60px rgba(255,75,31,0.8),0 0 120px rgba(255,75,31,0.3);} }
.arsii-text-logo { font-family:'Syne',sans-serif; font-weight:800; }
.arsii-text-logo .arsii-name { font-size:28px; color:var(--flame); display:block; }
.arsii-text-logo .arsii-year { font-size:14px; color:var(--muted); letter-spacing:4px; }
.splash-xopfly { font-family:'Syne',sans-serif; font-weight:800; font-size:clamp(72px,18vw,140px); letter-spacing:-4px; line-height:1; background:linear-gradient(135deg,var(--flame) 0%,var(--amber) 40%,var(--gold) 70%,var(--flame) 100%); background-size:200% 200%; -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; animation:gradientShift 3s ease infinite; }
@keyframes gradientShift { 0%,100%{background-position:0% 50%;} 50%{background-position:100% 50%;} }
.splash-tagline { font-size:14px; color:var(--muted); letter-spacing:5px; text-transform:uppercase; margin-top:12px; animation:splashEntrance 1s 0.3s var(--transition) both; }
.splash-progress { margin-top:60px; width:200px; height:2px; background:rgba(255,255,255,0.08); border-radius:100px; overflow:hidden; }
.splash-progress-bar { height:100%; background:linear-gradient(90deg,var(--flame),var(--gold)); border-radius:100px; width:0%; animation:loadProgress 2.5s var(--transition) forwards; }
@keyframes loadProgress { to{width:100%;} }

/* ─── NAVIGATION ─── */
nav { position:fixed; top:0; left:0; right:0; z-index:1000; padding:16px 48px; display:flex; align-items:center; justify-content:space-between; transition:all 0.3s var(--transition); }
nav.scrolled { background:rgba(15,8,32,0.92); backdrop-filter:blur(24px); border-bottom:1px solid var(--border); padding:12px 48px; }
.nav-brand { font-family:'Syne',sans-serif; font-weight:800; font-size:26px; background:linear-gradient(135deg,var(--flame),var(--gold)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; display:flex; align-items:center; gap:10px; cursor:pointer; }
.nav-brand-icon { width:36px; height:36px; background:linear-gradient(135deg,var(--flame),var(--amber)); border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:14px; font-weight:800; color:#fff; font-family:'Syne',sans-serif; flex-shrink:0; }
.nav-links { display:flex; align-items:center; gap:8px; list-style:none; }
.nav-links a { padding:8px 16px; border-radius:100px; font-size:13px; font-weight:500; color:var(--muted); transition:all 0.2s; position:relative; }
.nav-links a:hover,.nav-links a.active { color:var(--text); background:var(--glass); }
.nav-links a.active::after { content:''; position:absolute; bottom:4px; left:50%; transform:translateX(-50%); width:4px; height:4px; border-radius:50%; background:var(--flame); }
.nav-right { display:flex; align-items:center; gap:12px; }
.lang-switcher { display:flex; background:var(--glass); border:1px solid var(--border); border-radius:100px; padding:3px; gap:2px; }
.lang-btn-nav { padding:5px 12px; border-radius:100px; border:none; background:transparent; color:var(--muted); font-size:11px; font-weight:600; letter-spacing:0.5px; cursor:none; transition:all 0.2s; }
.lang-btn-nav.active { background:var(--flame); color:#fff; }
.nav-cta { padding:9px 22px; background:linear-gradient(135deg,var(--flame),#FF7849); border:none; border-radius:100px; color:#fff; font-family:'Syne',sans-serif; font-size:13px; font-weight:700; cursor:none; transition:all 0.25s var(--transition); box-shadow:0 4px 20px rgba(255,75,31,0.35); }
.nav-cta:hover { transform:translateY(-2px); box-shadow:0 8px 32px rgba(255,75,31,0.5); }
.hamburger { display:none; flex-direction:column; gap:5px; cursor:none; padding:8px; background:none; border:none; }
.hamburger span { display:block; width:24px; height:2px; background:var(--text); border-radius:2px; transition:all 0.3s; }
.mobile-nav { display:none; position:fixed; inset:0; background:rgba(7,2,15,0.97); backdrop-filter:blur(20px); z-index:999; flex-direction:column; align-items:center; justify-content:center; gap:32px; }
.mobile-nav.open { display:flex; }
.mobile-nav a { font-family:'Syne',sans-serif; font-size:32px; font-weight:700; color:var(--muted); transition:color 0.2s; }
.mobile-nav a:hover { color:var(--flame); }

/* ─── PAGE SECTIONS ─── */
.page-section { display:none; min-height:100vh; padding-top:80px; }
.page-section.active { display:block; }

/* ─── HERO ─── */
.hero { min-height:100vh; display:grid; grid-template-columns:1fr 1fr; align-items:center; padding:120px 80px 80px; position:relative; overflow:hidden; gap:60px; }
.hero-bg { position:absolute; inset:0; background:radial-gradient(ellipse 60% 80% at -10% 50%,rgba(255,75,31,0.12) 0%,transparent 60%),radial-gradient(ellipse 50% 70% at 110% 30%,rgba(0,119,182,0.1) 0%,transparent 60%),radial-gradient(ellipse 40% 50% at 60% 100%,rgba(0,191,165,0.07) 0%,transparent 50%); }
.hero-grid-lines { position:absolute; inset:0; background-image:linear-gradient(rgba(255,255,255,0.02) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,0.02) 1px,transparent 1px); background-size:60px 60px; mask-image:radial-gradient(ellipse 80% 80% at 50% 50%,black,transparent); }
.hero-content { position:relative; z-index:2; }
.hero-eyebrow { display:inline-flex; align-items:center; gap:8px; padding:6px 14px; background:rgba(255,75,31,0.12); border:1px solid rgba(255,75,31,0.25); border-radius:100px; font-size:11px; font-weight:600; letter-spacing:2px; text-transform:uppercase; color:var(--flame); margin-bottom:24px; animation:fadeUp 0.8s var(--transition) both; }
.hero-eyebrow-dot { width:6px; height:6px; border-radius:50%; background:var(--flame); animation:blink 1.5s ease-in-out infinite; }
@keyframes blink { 0%,100%{opacity:1;} 50%{opacity:0.3;} }
.hero-h1 { font-family:'Syne',sans-serif; font-size:clamp(44px,5vw,76px); font-weight:800; line-height:1.05; letter-spacing:-0.03em; margin-bottom:24px; animation:fadeUp 0.8s 0.1s var(--transition) both; }
.hero-h1 .highlight { background:linear-gradient(135deg,var(--flame),var(--amber)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
.hero-h1 .outline-text { -webkit-text-stroke:2px rgba(255,255,255,0.25); -webkit-text-fill-color:transparent; }
.hero-desc { font-size:17px; color:var(--muted); line-height:1.75; max-width:500px; margin-bottom:40px; animation:fadeUp 0.8s 0.2s var(--transition) both; }
.hero-btns { display:flex; gap:14px; flex-wrap:wrap; animation:fadeUp 0.8s 0.3s var(--transition) both; }
.btn-primary { padding:14px 32px; background:linear-gradient(135deg,var(--flame),#FF7849); border:none; border-radius:100px; color:#fff; font-family:'Syne',sans-serif; font-size:14px; font-weight:700; cursor:none; transition:all 0.25s var(--transition); box-shadow:0 8px 32px rgba(255,75,31,0.4); display:inline-flex; align-items:center; gap:8px; }
.btn-primary:hover { transform:translateY(-3px); box-shadow:0 16px 48px rgba(255,75,31,0.5); }
.btn-secondary { padding:14px 32px; background:var(--glass); border:1px solid var(--border); border-radius:100px; color:var(--text); font-family:'Syne',sans-serif; font-size:14px; font-weight:600; cursor:none; transition:all 0.25s var(--transition); display:inline-flex; align-items:center; gap:8px; backdrop-filter:blur(10px); }
.btn-secondary:hover { background:var(--glass-b); border-color:rgba(255,255,255,0.15); transform:translateY(-2px); }
@keyframes fadeUp { from{opacity:0;transform:translateY(30px);} to{opacity:1;transform:translateY(0);} }
.hero-stats { display:flex; gap:32px; margin-top:48px; animation:fadeUp 0.8s 0.4s var(--transition) both; padding-top:40px; border-top:1px solid var(--border); flex-wrap:wrap; }
.stat-num { font-family:'Syne',sans-serif; font-size:32px; font-weight:800; background:linear-gradient(135deg,var(--flame),var(--gold)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; display:block; }
.stat-label { font-size:11px; color:var(--muted); letter-spacing:1px; text-transform:uppercase; }

/* Hero Visual */
.hero-visual { position:relative; z-index:2; animation:fadeUp 0.8s 0.2s var(--transition) both; }
.hero-card-stack { position:relative; width:100%; max-width:480px; margin:0 auto; }
.floating-card { background:var(--glass); backdrop-filter:blur(20px); border:1px solid var(--border); border-radius:var(--radius-lg); padding:20px; transition:all 0.3s var(--transition); }
.main-dest-card { padding:0; overflow:hidden; box-shadow:var(--shadow); }
.dest-card-img { width:100%; height:220px; display:flex; align-items:center; justify-content:center; font-size:80px; position:relative; }
.dest-card-body { padding:20px; }
.dest-card-title { font-family:'Syne',sans-serif; font-size:20px; font-weight:700; margin-bottom:6px; }
.dest-card-meta { font-size:12px; color:var(--muted); display:flex; gap:12px; align-items:center; }
.rating { color:var(--gold); font-weight:600; }
.mini-card { position:absolute; padding:14px 16px; border-radius:var(--radius); min-width:160px; animation:floatCard 6s ease-in-out infinite; }
.mini-card.card-weather { top:-20px; right:-20px; animation-delay:0s; }
.mini-card.card-activity { bottom:60px; right:-30px; animation-delay:1.5s; }
.mini-card.card-buddies { bottom:-20px; left:-20px; animation-delay:3s; }
@keyframes floatCard { 0%,100%{transform:translateY(0) rotate(0deg);} 33%{transform:translateY(-12px) rotate(1deg);} 66%{transform:translateY(6px) rotate(-0.5deg);} }
.mini-card-icon { font-size:22px; margin-bottom:6px; }
.mini-card-label { font-size:10px; color:var(--muted); text-transform:uppercase; letter-spacing:1px; }
.mini-card-value { font-family:'Syne',sans-serif; font-size:15px; font-weight:700; }

/* ─── SECTION LAYOUTS ─── */
.section { padding:100px 80px; position:relative; }
.section-sm { padding:60px 80px; }
.section-eyebrow { display:inline-flex; align-items:center; gap:8px; font-size:11px; font-weight:600; letter-spacing:3px; text-transform:uppercase; color:var(--flame); margin-bottom:16px; }
.section-eyebrow::before { content:''; display:inline-block; width:24px; height:2px; background:var(--flame); }
.section-title { font-family:'Syne',sans-serif; font-size:clamp(32px,4vw,52px); font-weight:800; letter-spacing:-0.02em; margin-bottom:16px; }
.section-title .accent { color:var(--flame); }
.section-desc { font-size:16px; color:var(--muted); max-width:560px; line-height:1.75; margin-bottom:56px; }

/* ─── FEATURES GRID ─── */
.features-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:20px; }
.feature-card { background:var(--glass); border:1px solid var(--border); border-radius:var(--radius-lg); padding:32px; position:relative; overflow:hidden; cursor:none; transition:all 0.35s var(--transition); }
.feature-card::before { content:''; position:absolute; inset:0; background:linear-gradient(135deg,rgba(255,75,31,0.06),transparent 60%); opacity:0; transition:opacity 0.3s; }
.feature-card:hover { transform:translateY(-6px); border-color:rgba(255,75,31,0.25); box-shadow:0 20px 60px rgba(0,0,0,0.4); }
.feature-card:hover::before { opacity:1; }
.feature-icon { width:56px; height:56px; border-radius:16px; display:flex; align-items:center; justify-content:center; font-size:26px; margin-bottom:20px; }
.feature-card-title { font-family:'Syne',sans-serif; font-size:18px; font-weight:700; margin-bottom:10px; }
.feature-card-desc { font-size:13px; color:var(--muted); line-height:1.7; }
.feature-arrow { position:absolute; top:28px; right:28px; opacity:0; transform:translate(-4px,4px); transition:all 0.25s; font-size:18px; color:var(--flame); }
.feature-card:hover .feature-arrow { opacity:1; transform:translate(0,0); }

/* ─── BANNER SLIDER ─── */
.banner-slider { position:relative; overflow:hidden; border-radius:var(--radius-lg); height:400px; }
.banner-slide { position:absolute; inset:0; display:flex; align-items:flex-end; padding:48px; opacity:0; transition:opacity 0.8s var(--transition); }
.banner-slide.active { opacity:1; }
.banner-slide-bg { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:120px; }
.banner-slide-overlay { position:absolute; inset:0; background:linear-gradient(to top,rgba(7,2,15,0.95) 0%,rgba(7,2,15,0.3) 60%,transparent 100%); }
.banner-content { position:relative; z-index:1; }
.banner-tag { display:inline-block; padding:4px 12px; background:var(--flame); border-radius:100px; font-size:10px; font-weight:700; letter-spacing:1px; text-transform:uppercase; margin-bottom:12px; }
.banner-title { font-family:'Syne',sans-serif; font-size:36px; font-weight:800; margin-bottom:8px; }
.banner-meta { font-size:13px; color:rgba(255,255,255,0.7); display:flex; gap:16px; align-items:center; flex-wrap:wrap; }
.banner-dots { position:absolute; bottom:24px; right:24px; display:flex; gap:6px; z-index:2; }
.banner-dot { width:6px; height:6px; border-radius:50%; background:rgba(255,255,255,0.3); cursor:none; transition:all 0.3s; }
.banner-dot.active { width:24px; border-radius:3px; background:var(--flame); }

/* ─── QUIZ ─── */
.quiz-container { max-width:760px; margin:0 auto; }
.quiz-header-card { background:linear-gradient(135deg,rgba(255,75,31,0.12),rgba(255,179,71,0.08)); border:1px solid rgba(255,75,31,0.2); border-radius:var(--radius-lg); padding:32px; margin-bottom:32px; display:flex; align-items:center; justify-content:space-between; gap:20px; }
.quiz-progress-track { flex:1; height:6px; background:rgba(255,255,255,0.08); border-radius:100px; overflow:hidden; }
.quiz-progress-fill { height:100%; background:linear-gradient(90deg,var(--flame),var(--gold)); border-radius:100px; transition:width 0.5s var(--transition); }
.quiz-score-display { font-family:'Syne',sans-serif; font-size:18px; font-weight:800; color:var(--flame); white-space:nowrap; }
.question-card { background:var(--glass); border:1px solid var(--border); border-radius:var(--radius-lg); padding:40px; margin-bottom:24px; position:relative; overflow:hidden; animation:questionReveal 0.5s var(--transition) both; }
@keyframes questionReveal { from{opacity:0;transform:scale(0.97) translateY(10px);} to{opacity:1;transform:scale(1) translateY(0);} }
.question-num { font-size:10px; letter-spacing:3px; text-transform:uppercase; color:var(--muted); margin-bottom:10px; }
.question-text { font-family:'Syne',sans-serif; font-size:22px; font-weight:700; line-height:1.4; }
.question-emoji { position:absolute; right:32px; top:32px; font-size:48px; opacity:0.2; }
.options-grid { display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:24px; }
.option-btn { padding:18px 20px; background:var(--glass); border:1.5px solid var(--border); border-radius:var(--radius); color:var(--text); font-family:'Epilogue',sans-serif; font-size:14px; font-weight:500; cursor:none; display:flex; align-items:center; gap:12px; transition:all 0.2s var(--transition); text-align:left; }
.option-btn:hover { background:rgba(255,75,31,0.1); border-color:rgba(255,75,31,0.4); transform:translateX(4px); }
.option-btn.correct { background:rgba(0,191,165,0.15); border-color:var(--teal); color:var(--teal); }
.option-btn.wrong { background:rgba(255,75,31,0.1); border-color:rgba(255,75,31,0.4); color:rgba(255,75,31,0.7); }
.option-letter { width:32px; height:32px; border-radius:50%; background:rgba(255,255,255,0.07); display:flex; align-items:center; justify-content:center; font-family:'Syne',sans-serif; font-size:12px; font-weight:700; flex-shrink:0; }
.quiz-result { text-align:center; padding:60px 40px; animation:questionReveal 0.6s var(--transition) both; }
.result-trophy { font-size:72px; margin-bottom:20px; animation:bounceIn 0.6s var(--transition); }
@keyframes bounceIn { 0%{transform:scale(0);} 60%{transform:scale(1.15);} 100%{transform:scale(1);} }
.result-score { font-family:'Syne',sans-serif; font-size:72px; font-weight:800; background:linear-gradient(135deg,var(--flame),var(--gold)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; line-height:1; margin-bottom:12px; }
.result-message { font-size:16px; color:var(--muted); margin-bottom:32px; }
.result-destinations { display:grid; grid-template-columns:repeat(3,1fr); gap:16px; margin-top:32px; text-align:left; }
.result-dest-card { background:var(--glass); border:1px solid var(--border); border-radius:var(--radius); padding:16px; transition:all 0.2s; }
.result-dest-card:hover { border-color:var(--flame); transform:translateY(-4px); }
.result-dest-emoji { font-size:32px; margin-bottom:8px; }
.result-dest-name { font-family:'Syne',sans-serif; font-size:14px; font-weight:700; }
.result-dest-desc { font-size:11px; color:var(--muted); margin-top:4px; }

/* ─── HOTELS & CARS ─── */
.hotel-filters { display:flex; gap:10px; flex-wrap:wrap; margin-bottom:32px; align-items:center; }
.filter-chip { padding:8px 18px; border-radius:100px; background:var(--glass); border:1px solid var(--border); color:var(--muted); font-size:12px; font-weight:600; cursor:none; transition:all 0.2s; white-space:nowrap; }
.filter-chip.active,.filter-chip:hover { background:var(--flame); border-color:var(--flame); color:#fff; }
.budget-input-wrap { display:flex; align-items:center; gap:12px; background:var(--glass); border:1px solid var(--border); border-radius:100px; padding:8px 20px; margin-bottom:32px; max-width:400px; }
.budget-input-wrap label { font-size:11px; color:var(--muted); white-space:nowrap; }
.budget-slider { flex:1; appearance:none; height:3px; background:linear-gradient(90deg,var(--flame) 0%,var(--border) 0%); border-radius:100px; outline:none; cursor:none; }
.budget-slider::-webkit-slider-thumb { appearance:none; width:18px; height:18px; border-radius:50%; background:var(--flame); box-shadow:0 0 0 4px rgba(255,75,31,0.2); cursor:none; }
.budget-value { font-family:'Syne',sans-serif; font-size:14px; font-weight:700; color:var(--gold); white-space:nowrap; min-width:80px; }
.hotels-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(320px,1fr)); gap:24px; }
.hotel-card { background:var(--glass); border:1px solid var(--border); border-radius:var(--radius-lg); overflow:hidden; cursor:none; transition:all 0.35s var(--transition); position:relative; }
.hotel-card:hover { transform:translateY(-8px); border-color:rgba(255,75,31,0.3); box-shadow:0 24px 60px rgba(0,0,0,0.5); }
.hotel-img { width:100%; height:200px; display:flex; align-items:center; justify-content:center; font-size:64px; position:relative; overflow:hidden; }
.hotel-img::after { content:''; position:absolute; inset:0; background:linear-gradient(to top,rgba(7,2,15,0.6),transparent); }
.hotel-badge { position:absolute; top:14px; left:14px; padding:5px 12px; border-radius:100px; font-size:9px; font-weight:700; letter-spacing:1px; text-transform:uppercase; z-index:1; }
.hotel-body { padding:20px; }
.hotel-name { font-family:'Syne',sans-serif; font-size:17px; font-weight:700; margin-bottom:4px; }
.hotel-location { font-size:12px; color:var(--muted); display:flex; align-items:center; gap:4px; margin-bottom:12px; }
.hotel-row { display:flex; align-items:center; justify-content:space-between; margin-bottom:12px; }
.hotel-price { font-family:'Syne',sans-serif; font-size:20px; font-weight:800; color:var(--gold); }
.hotel-price span { font-size:12px; font-weight:400; color:var(--muted); }
.hotel-stars { color:var(--gold); font-size:12px; letter-spacing:1px; }
.hotel-tags { display:flex; gap:6px; flex-wrap:wrap; margin-top:14px; }
.hotel-tag { padding:4px 10px; border-radius:100px; font-size:9px; font-weight:600; background:rgba(0,191,165,0.1); border:1px solid rgba(0,191,165,0.2); color:var(--teal); }
.hotel-book-btn { width:100%; padding:12px; margin-top:16px; background:linear-gradient(135deg,var(--flame),#FF7849); border:none; border-radius:var(--radius-sm); color:#fff; font-family:'Syne',sans-serif; font-size:13px; font-weight:700; cursor:none; transition:all 0.2s; }
.hotel-book-btn:hover { opacity:0.9; transform:translateY(-1px); }

/* Map */
.map-placeholder { width:100%; height:380px; border-radius:var(--radius-lg); background:var(--glass); border:1px solid var(--border); display:flex; align-items:center; justify-content:center; flex-direction:column; gap:16px; position:relative; overflow:hidden; margin-top:60px; }
.map-pin { display:flex; flex-direction:column; align-items:center; gap:6px; cursor:none; transition:transform 0.2s; }
.map-pin:hover { transform:scale(1.1) translateY(-4px); }
.map-pin-icon { width:48px; height:48px; border-radius:50% 50% 50% 0; transform:rotate(-45deg); background:var(--flame); display:flex; align-items:center; justify-content:center; box-shadow:0 4px 16px rgba(255,75,31,0.4); }
.map-pin-icon-inner { transform:rotate(45deg); font-size:18px; }
.map-pin-label { font-size:10px; font-weight:600; color:var(--muted); text-align:center; }

/* Cars */
.cars-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); gap:24px; }
.car-card { background:var(--glass); border:1px solid var(--border); border-radius:var(--radius-lg); overflow:hidden; cursor:none; transition:all 0.35s var(--transition); position:relative; }
.car-card:hover { transform:translateY(-8px); border-color:rgba(0,119,182,0.4); box-shadow:0 24px 60px rgba(0,0,0,0.5); }
.car-img { width:100%; height:180px; display:flex; align-items:center; justify-content:center; font-size:72px; position:relative; overflow:hidden; background:linear-gradient(135deg,#0d1b3e,#1a2d6b); }
.car-img::after { content:''; position:absolute; inset:0; background:linear-gradient(to top,rgba(7,2,15,0.7),transparent); }
.car-badge { position:absolute; top:14px; left:14px; padding:5px 12px; border-radius:100px; font-size:9px; font-weight:700; letter-spacing:1px; text-transform:uppercase; z-index:1; color:#fff; }
.car-body { padding:20px; }
.car-name { font-family:'Syne',sans-serif; font-size:16px; font-weight:700; margin-bottom:3px; }
.car-brand { font-size:11px; color:var(--muted); margin-bottom:10px; }
.car-specs { display:flex; gap:12px; margin-bottom:12px; flex-wrap:wrap; }
.car-spec { display:flex; align-items:center; gap:4px; font-size:10px; color:var(--muted); font-weight:500; background:rgba(255,255,255,0.04); padding:3px 8px; border-radius:6px; border:1px solid var(--border); }
.car-row { display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; }
.car-price { font-family:'Syne',sans-serif; font-size:20px; font-weight:800; color:var(--ocean); }
.car-price span { font-size:11px; font-weight:400; color:var(--muted); }
.car-tags { display:flex; gap:6px; flex-wrap:wrap; margin-bottom:14px; }
.car-tag { padding:3px 9px; border-radius:100px; font-size:9px; font-weight:600; background:rgba(0,119,182,0.1); border:1px solid rgba(0,119,182,0.2); color:var(--ocean); }
.car-rent-btn { width:100%; padding:12px; margin-top:4px; background:linear-gradient(135deg,var(--ocean),#0096C7); border:none; border-radius:var(--radius-sm); color:#fff; font-family:'Syne',sans-serif; font-size:13px; font-weight:700; cursor:none; transition:all 0.2s; }
.car-rent-btn:hover { opacity:0.9; }

/* Page tabs */
.page-tabs { display:flex; gap:0; background:var(--glass); border:1px solid var(--border); border-radius:var(--radius); padding:4px; width:fit-content; margin-bottom:40px; }
.page-tab-btn { padding:10px 28px; border:none; border-radius:calc(var(--radius) - 4px); font-family:'Syne',sans-serif; font-size:13px; font-weight:700; color:var(--muted); background:transparent; cursor:none; transition:all 0.25s var(--transition); letter-spacing:0.5px; }
.page-tab-btn.active { background:var(--flame); color:#fff; }

/* AI Rec Banner */
.ai-rec-banner { background:linear-gradient(135deg,rgba(0,119,182,0.12),rgba(0,191,165,0.07)); border:1px solid rgba(0,119,182,0.25); border-radius:var(--radius-lg); padding:28px 32px; margin-top:48px; display:flex; gap:20px; align-items:flex-start; flex-wrap:wrap; }
.ai-rec-banner h4 { font-family:'Syne',sans-serif; font-size:13px; font-weight:700; color:var(--ocean); letter-spacing:1px; text-transform:uppercase; margin-bottom:8px; }
.ai-rec-banner p { font-size:13px; color:var(--muted); line-height:1.8; }
.ai-spinner { width:16px; height:16px; border:2px solid rgba(255,255,255,0.1); border-top-color:var(--ocean); border-radius:50%; animation:spin .7s linear infinite; flex-shrink:0; }
@keyframes spin { to{transform:rotate(360deg);} }

/* ─── SOCIAL ─── */
.buddy-card { background:var(--glass); border:1px solid var(--border); border-radius:var(--radius-lg); padding:24px; display:flex; align-items:flex-start; gap:16px; cursor:none; transition:all 0.25s var(--transition); }
.buddy-card:hover { border-color:rgba(0,191,165,0.3); transform:translateX(4px); }
.buddy-avatar { width:52px; height:52px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:24px; flex-shrink:0; box-shadow:0 4px 16px rgba(0,0,0,0.3); }
.buddy-info { flex:1; min-width:0; }
.buddy-name { font-family:'Syne',sans-serif; font-size:15px; font-weight:700; margin-bottom:3px; }
.buddy-meta { font-size:11px; color:var(--muted); margin-bottom:10px; }
.buddy-interests { display:flex; gap:6px; flex-wrap:wrap; }
.interest-chip { padding:3px 10px; border-radius:100px; background:rgba(255,255,255,0.05); border:1px solid var(--border); font-size:10px; font-weight:500; }
.connect-btn { padding:9px 20px; background:linear-gradient(135deg,var(--teal),#00A896); border:none; border-radius:100px; color:#fff; font-family:'Syne',sans-serif; font-size:12px; font-weight:700; cursor:none; transition:all 0.2s; flex-shrink:0; align-self:center; }
.connect-btn:hover { transform:scale(1.05); box-shadow:0 4px 16px rgba(0,191,165,0.3); }
.badge-grid { display:flex; gap:16px; flex-wrap:wrap; }
.badge-item { background:var(--glass); border:1px solid var(--border); border-radius:var(--radius); padding:16px; text-align:center; min-width:100px; cursor:none; transition:all 0.25s; }
.badge-item:hover { border-color:var(--gold); transform:translateY(-4px); }
.badge-item.locked { opacity:0.4; }
.badge-emoji { font-size:28px; margin-bottom:8px; }
.badge-name { font-size:10px; font-weight:700; letter-spacing:0.5px; }
.badge-pts { font-size:9px; color:var(--gold); margin-top:2px; }
.group-trip-card { border-radius:var(--radius-lg); overflow:hidden; position:relative; height:220px; cursor:none; transition:all 0.3s var(--transition); }
.group-trip-card:hover { transform:scale(1.02); }
.group-trip-bg { width:100%; height:100%; display:flex; align-items:center; justify-content:center; font-size:80px; }
.group-trip-overlay { position:absolute; inset:0; background:linear-gradient(to top,rgba(7,2,15,0.95),rgba(7,2,15,0.1)); padding:20px; display:flex; flex-direction:column; justify-content:flex-end; }
.group-trip-name { font-family:'Syne',sans-serif; font-size:18px; font-weight:700; margin-bottom:6px; }
.group-trip-meta { font-size:11px; color:rgba(255,255,255,0.6); display:flex; gap:12px; align-items:center; }
.join-btn { position:absolute; top:16px; right:16px; padding:6px 14px; background:rgba(255,75,31,0.85); backdrop-filter:blur(10px); border:none; border-radius:100px; color:#fff; font-size:11px; font-weight:700; cursor:none; }

/* Leaderboard */
.leaderboard { background:var(--glass); border:1px solid var(--border); border-radius:var(--radius-lg); overflow:hidden; }
.lb-header { padding:20px 24px; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; }
.lb-row { padding:14px 24px; display:flex; align-items:center; gap:14px; border-bottom:1px solid rgba(255,255,255,0.03); transition:background 0.2s; }
.lb-row:hover { background:rgba(255,255,255,0.03); }
.lb-row.me { background:rgba(255,75,31,0.08); border-left:3px solid var(--flame); }
.lb-rank { font-family:'Syne',sans-serif; font-size:14px; font-weight:800; width:30px; text-align:center; }
.lb-rank.gold { color:var(--gold); }
.lb-rank.silver { color:#C0C0C0; }
.lb-rank.bronze { color:#CD7F32; }
.lb-avatar { width:36px; height:36px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:16px; flex-shrink:0; }
.lb-name { flex:1; font-size:13px; font-weight:600; }
.lb-pts { font-family:'Syne',sans-serif; font-size:13px; font-weight:800; color:var(--gold); }

/* ─── AI ASSISTANT ─── */
.ai-assistant { background:linear-gradient(135deg,rgba(255,75,31,0.08),rgba(0,119,182,0.06)); border:1px solid rgba(255,75,31,0.15); border-radius:var(--radius-lg); padding:40px; position:relative; overflow:hidden; }
.ai-assistant::before { content:''; position:absolute; top:-50%; right:-20%; width:400px; height:400px; border-radius:50%; background:radial-gradient(rgba(255,75,31,0.08),transparent 70%); pointer-events:none; }
.ai-header { display:flex; align-items:center; gap:14px; margin-bottom:24px; }
.ai-avatar { width:52px; height:52px; border-radius:16px; background:linear-gradient(135deg,var(--flame),var(--amber)); display:flex; align-items:center; justify-content:center; font-size:24px; box-shadow:0 4px 20px rgba(255,75,31,0.3); }
.ai-name { font-family:'Syne',sans-serif; font-size:17px; font-weight:700; }
.ai-status { font-size:11px; color:var(--teal); display:flex; align-items:center; gap:5px; }
.ai-status-dot { width:6px; height:6px; border-radius:50%; background:var(--teal); animation:blink 1.5s infinite; }
.ai-chat-area { background:rgba(0,0,0,0.2); border-radius:var(--radius); padding:20px; min-height:200px; max-height:360px; overflow-y:auto; margin-bottom:16px; font-size:14px; line-height:1.75; }
.ai-msg { margin-bottom:16px; }
.ai-msg.user { text-align:right; }
.ai-bubble { display:inline-block; padding:10px 16px; border-radius:14px; max-width:85%; font-size:13px; line-height:1.6; }
.ai-bubble.bot { background:rgba(255,255,255,0.07); border:1px solid var(--border); border-radius:14px 14px 14px 4px; color:var(--text); }
.ai-bubble.user { background:linear-gradient(135deg,var(--flame),#FF7849); border-radius:14px 14px 4px 14px; color:#fff; }
.ai-typing { display:flex; gap:4px; align-items:center; padding:8px 0; }
.ai-typing span { width:6px; height:6px; border-radius:50%; background:var(--flame); animation:typing 1.2s ease-in-out infinite; }
.ai-typing span:nth-child(2) { animation-delay:0.2s; }
.ai-typing span:nth-child(3) { animation-delay:0.4s; }
@keyframes typing { 0%,60%,100%{transform:translateY(0);opacity:0.5;} 30%{transform:translateY(-8px);opacity:1;} }
.ai-input-row { display:flex; gap:10px; }
.ai-input { flex:1; padding:12px 18px; background:rgba(255,255,255,0.06); border:1px solid var(--border); border-radius:var(--radius-sm); color:var(--text); font-family:'Epilogue',sans-serif; font-size:13px; outline:none; transition:border-color 0.2s; }
.ai-input:focus { border-color:rgba(255,75,31,0.4); }
.ai-input::placeholder { color:var(--muted); }
.ai-send-btn { padding:12px 24px; background:var(--flame); border:none; border-radius:var(--radius-sm); color:#fff; font-family:'Syne',sans-serif; font-size:13px; font-weight:700; cursor:none; transition:all 0.2s; }
.ai-send-btn:hover { background:#FF6B3D; transform:scale(1.03); }
.ai-suggestions { display:flex; gap:8px; flex-wrap:wrap; margin-bottom:12px; }
.ai-suggestion-chip { padding:6px 14px; background:rgba(255,255,255,0.05); border:1px solid var(--border); border-radius:100px; font-size:11px; color:var(--muted); cursor:none; transition:all 0.2s; }
.ai-suggestion-chip:hover { background:rgba(255,75,31,0.1); border-color:rgba(255,75,31,0.3); color:var(--flame); }

/* ─── ITINERARY PLANNER ─── */
.itinerary-planner { background:linear-gradient(135deg,rgba(245,197,24,0.07),rgba(255,75,31,0.05)); border:1px solid rgba(245,197,24,0.15); border-radius:var(--radius-lg); padding:36px; margin-top:48px; }
.plan-options { display:flex; gap:12px; flex-wrap:wrap; margin-bottom:24px; }
.plan-opt-btn { padding:10px 22px; background:var(--glass); border:1.5px solid var(--border); border-radius:100px; color:var(--muted); font-family:'Syne',sans-serif; font-size:13px; font-weight:700; cursor:none; transition:all 0.2s; }
.plan-opt-btn.active { background:rgba(245,197,24,0.15); border-color:var(--gold); color:var(--gold); }
.itinerary-output { background:rgba(0,0,0,0.2); border-radius:var(--radius); padding:24px; min-height:120px; font-size:13px; line-height:1.9; color:rgba(255,255,255,0.85); display:none; }
.itinerary-output.visible { display:block; animation:questionReveal 0.4s var(--transition); }
.itinerary-day { font-family:'Syne',sans-serif; font-size:15px; font-weight:700; color:var(--gold); margin-bottom:8px; margin-top:16px; }
.itinerary-day:first-child { margin-top:0; }
.itinerary-item { padding:6px 0; padding-left:16px; border-left:2px solid rgba(255,75,31,0.3); margin-left:6px; margin-bottom:4px; }

/* ─── USER PROFILE PANEL ─── */
.profile-panel { position:fixed; right:0; top:0; bottom:0; width:340px; background:var(--mid); border-left:1px solid var(--border); z-index:2000; transform:translateX(100%); transition:transform 0.4s var(--transition); overflow-y:auto; padding:28px; }
.profile-panel.open { transform:translateX(0); }
.profile-close { position:absolute; top:20px; right:20px; width:36px; height:36px; border-radius:50%; background:var(--glass); border:1px solid var(--border); color:var(--text); font-size:16px; cursor:none; display:flex; align-items:center; justify-content:center; }
.profile-avatar-big { width:72px; height:72px; border-radius:50%; background:linear-gradient(135deg,var(--flame),var(--amber)); display:flex; align-items:center; justify-content:center; font-size:30px; margin-bottom:16px; }
.profile-stat-grid { display:grid; grid-template-columns:1fr 1fr; gap:12px; margin:20px 0; }
.profile-stat { background:var(--glass); border:1px solid var(--border); border-radius:var(--radius-sm); padding:14px; text-align:center; }
.profile-stat-num { font-family:'Syne',sans-serif; font-size:22px; font-weight:800; color:var(--gold); display:block; }
.profile-stat-label { font-size:10px; color:var(--muted); margin-top:2px; }
.profile-section-title { font-family:'Syne',sans-serif; font-size:13px; font-weight:700; letter-spacing:1px; text-transform:uppercase; color:var(--muted); margin:24px 0 12px; }
.preference-chip { padding:6px 14px; border-radius:100px; border:1px solid var(--border); font-size:11px; font-weight:500; cursor:none; transition:all 0.2s; margin:3px; display:inline-block; }
.preference-chip.active { background:rgba(255,75,31,0.15); border-color:var(--flame); color:var(--flame); }
.profile-toggle { position:fixed; right:24px; bottom:100px; width:52px; height:52px; background:linear-gradient(135deg,var(--flame),var(--amber)); border:none; border-radius:50%; color:#fff; font-size:22px; cursor:none; box-shadow:0 8px 32px rgba(255,75,31,0.4); z-index:1500; display:flex; align-items:center; justify-content:center; transition:all 0.25s; }
.profile-toggle:hover { transform:scale(1.1); }

/* ─── ABOUT ─── */
.about-hero { background:linear-gradient(135deg,rgba(255,75,31,0.1),rgba(255,179,71,0.06)); border:1px solid rgba(255,75,31,0.15); border-radius:var(--radius-lg); padding:60px; text-align:center; position:relative; overflow:hidden; margin-bottom:40px; }
.about-arsii-logo { width:80px; height:80px; border-radius:22px; background:linear-gradient(135deg,var(--flame),var(--amber)); display:flex; align-items:center; justify-content:center; font-family:'Syne',sans-serif; font-weight:800; font-size:26px; color:#fff; margin:0 auto 24px; box-shadow:0 12px 40px rgba(255,75,31,0.4),0 0 80px rgba(255,75,31,0.15); }
.about-title { font-family:'Syne',sans-serif; font-size:48px; font-weight:800; background:linear-gradient(135deg,var(--flame),var(--gold)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; margin-bottom:8px; }
.about-competition { display:inline-flex; align-items:center; gap:8px; padding:8px 20px; background:rgba(255,75,31,0.12); border:1px solid rgba(255,75,31,0.25); border-radius:100px; font-size:13px; font-weight:600; color:var(--flame); margin:16px 0 24px; }
.about-desc { font-size:15px; color:var(--muted); max-width:680px; margin:0 auto; line-height:1.8; }
.lang-tabs { display:flex; gap:8px; background:var(--glass); border:1px solid var(--border); border-radius:var(--radius); padding:6px; margin-bottom:24px; width:fit-content; }
.lang-tab { padding:8px 20px; border-radius:var(--radius-sm); border:none; background:transparent; color:var(--muted); font-size:12px; font-weight:700; cursor:none; transition:all 0.2s; letter-spacing:0.5px; }
.lang-tab.active { background:var(--flame); color:#fff; }
.about-lang-content { background:var(--glass); border:1px solid var(--border); border-radius:var(--radius-lg); padding:32px; min-height:120px; font-size:15px; line-height:1.9; display:none; }
.about-lang-content.active { display:block; }
.tip-card { background:var(--glass); border:1px solid var(--border); border-radius:var(--radius); padding:20px; display:flex; gap:16px; align-items:flex-start; transition:all 0.2s; }
.tip-card:hover { border-color:rgba(0,191,165,0.3); transform:translateX(6px); }
.tip-icon { width:44px; height:44px; border-radius:12px; background:rgba(0,191,165,0.1); display:flex; align-items:center; justify-content:center; font-size:20px; flex-shrink:0; }
.tip-title { font-family:'Syne',sans-serif; font-size:14px; font-weight:700; margin-bottom:5px; color:var(--teal); }
.tip-text { font-size:13px; color:var(--muted); line-height:1.6; }

/* ─── MODAL ─── */
.modal-backdrop { position:fixed; inset:0; background:rgba(0,0,0,0.75); backdrop-filter:blur(8px); z-index:5000; display:flex; align-items:center; justify-content:center; padding:20px; opacity:0; pointer-events:none; transition:opacity 0.3s; }
.modal-backdrop.show { opacity:1; pointer-events:all; }
.modal-box { background:var(--mid); border:1px solid var(--border); border-radius:var(--radius-lg); padding:40px; max-width:520px; width:100%; max-height:90vh; overflow-y:auto; transform:scale(0.95) translateY(20px); transition:transform 0.3s var(--transition); }
.modal-backdrop.show .modal-box { transform:scale(1) translateY(0); }
.modal-close { position:absolute; top:20px; right:20px; width:36px; height:36px; border-radius:50%; background:var(--glass); border:1px solid var(--border); color:var(--text); font-size:18px; cursor:none; display:flex; align-items:center; justify-content:center; }

/* Booking form */
.form-group { margin-bottom:20px; }
.form-label { font-size:11px; font-weight:700; letter-spacing:1px; text-transform:uppercase; color:var(--muted); margin-bottom:8px; display:block; }
.form-input,.form-select { width:100%; padding:12px 16px; background:rgba(255,255,255,0.06); border:1px solid var(--border); border-radius:var(--radius-sm); color:var(--text); font-family:'Epilogue',sans-serif; font-size:13px; outline:none; transition:border-color 0.2s; }
.form-input:focus,.form-select:focus { border-color:rgba(255,75,31,0.4); }
.form-select option { background:var(--mid); }
.form-row { display:grid; grid-template-columns:1fr 1fr; gap:14px; }
.confirm-btn { width:100%; padding:14px; background:linear-gradient(135deg,var(--flame),#FF7849); border:none; border-radius:var(--radius-sm); color:#fff; font-family:'Syne',sans-serif; font-size:14px; font-weight:700; cursor:none; transition:all 0.25s; margin-top:8px; }
.confirm-btn:hover { transform:translateY(-2px); box-shadow:0 8px 24px rgba(255,75,31,0.4); }

/* ─── TOAST ─── */
.toast-container { position:fixed; bottom:30px; right:30px; z-index:9000; display:flex; flex-direction:column; gap:10px; }
.toast { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:14px 20px; display:flex; align-items:center; gap:12px; font-size:13px; min-width:280px; box-shadow:0 8px 32px rgba(0,0,0,0.4); animation:toastIn 0.3s var(--transition); border-left:3px solid var(--flame); }
@keyframes toastIn { from{opacity:0;transform:translateX(40px);} to{opacity:1;transform:translateX(0);} }

/* ─── FOOTER ─── */
footer { background:var(--night); border-top:1px solid var(--border); padding:60px 80px 40px; }
.footer-grid { display:grid; grid-template-columns:2fr 1fr 1fr 1fr; gap:48px; margin-bottom:48px; }
.footer-logo { font-family:'Syne',sans-serif; font-weight:800; font-size:28px; background:linear-gradient(135deg,var(--flame),var(--gold)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; margin-bottom:12px; }
.footer-desc { font-size:13px; color:var(--muted); line-height:1.7; max-width:280px; }
.footer-heading { font-family:'Syne',sans-serif; font-size:13px; font-weight:700; letter-spacing:1px; text-transform:uppercase; margin-bottom:16px; color:var(--muted); }
.footer-links { list-style:none; display:flex; flex-direction:column; gap:10px; }
.footer-links a { font-size:13px; color:var(--muted); transition:color 0.2s; }
.footer-links a:hover { color:var(--flame); }
.footer-bottom { display:flex; justify-content:space-between; align-items:center; padding-top:32px; border-top:1px solid var(--border); font-size:12px; color:rgba(255,255,255,0.2); }

/* ─── SCROLL ANIMATIONS ─── */
.reveal { opacity:0; transform:translateY(30px); transition:opacity 0.7s var(--transition),transform 0.7s var(--transition); }
.reveal.visible { opacity:1; transform:translateY(0); }
.reveal-delay-1 { transition-delay:0.1s; }
.reveal-delay-2 { transition-delay:0.2s; }
.reveal-delay-3 { transition-delay:0.3s; }
.reveal-delay-4 { transition-delay:0.4s; }

/* ─── UTILS ─── */
.grid-2 { display:grid; grid-template-columns:1fr 1fr; gap:24px; }
.grid-3 { display:grid; grid-template-columns:repeat(3,1fr); gap:24px; }
.grid-4 { display:grid; grid-template-columns:repeat(4,1fr); gap:20px; }
.flex { display:flex; }
.flex-between { display:flex; justify-content:space-between; align-items:center; }
.flex-center { display:flex; align-items:center; justify-content:center; }
.gap-8 { gap:8px; }
.gap-12 { gap:12px; }
.gap-20 { gap:20px; }
.gap-32 { gap:32px; }
.mb-12 { margin-bottom:12px; }
.mb-20 { margin-bottom:20px; }
.mb-32 { margin-bottom:32px; }
.mb-48 { margin-bottom:48px; }
.text-muted { color:var(--muted); }
.text-sm { font-size:12px; }
.text-center { text-align:center; }
.w-full { width:100%; }
.bg-flame { background:rgba(255,75,31,0.12); }
.bg-teal  { background:rgba(0,191,165,0.12); }
.bg-ocean { background:rgba(0,119,182,0.12); }
.bg-gold  { background:rgba(245,197,24,0.12); }
.c-flame  { color:var(--flame); }
.c-teal   { color:var(--teal); }
.c-gold   { color:var(--gold); }
.c-ocean  { color:var(--ocean); }

/* ─── RESPONSIVE ─── */
@media (max-width:1024px) {
  .hero { grid-template-columns:1fr; padding:100px 40px 60px; }
  .hero-visual { display:none; }
  .section,.section-sm { padding:60px 40px; }
  footer { padding:48px 40px 32px; }
  .footer-grid { grid-template-columns:1fr 1fr; gap:32px; }
  nav { padding:16px 32px; }
  nav.scrolled { padding:12px 32px; }
  .profile-panel { width:100%; max-width:380px; }
}
@media (max-width:768px) {
  .nav-links,.nav-cta,.lang-switcher { display:none; }
  .hamburger { display:flex; }
  .hero { padding:90px 24px 48px; }
  .section { padding:48px 24px; }
  .section-sm { padding:40px 24px; }
  .options-grid { grid-template-columns:1fr; }
  .result-destinations { grid-template-columns:1fr; }
  .hotels-grid,.cars-grid { grid-template-columns:1fr; }
  .grid-2,.grid-3,.grid-4 { grid-template-columns:1fr; }
  footer { padding:40px 24px 28px; }
  .footer-grid { grid-template-columns:1fr; gap:24px; }
  nav { padding:14px 24px; }
  .about-hero { padding:40px 24px; }
  .about-title { font-size:36px; }
  .hero-stats { flex-wrap:wrap; gap:20px; }
  .form-row { grid-template-columns:1fr; }
  .profile-panel { width:100%; }
}
  </style>
</head>
<body>

<div class="cursor" id="cursor"></div>
<div class="cursor-follower" id="cursorFollower"></div>

<!-- ═══════ SPLASH SCREEN ═══════ -->
<div id="splash-screen">
  <div class="splash-particles"></div>
  <div class="splash-logo-wrap">
    <div class="splash-arsii-badge">
      <div class="arsii-logo-circle">AR</div>
      <div class="arsii-text-logo">
        <span class="arsii-name">ARSII</span>
        <span class="arsii-year">2026</span>
      </div>
    </div>
    <div class="splash-xopfly">XOPFLY</div>
    <div class="splash-tagline">Discover Tunisia · Smarter</div>
    <div class="splash-progress"><div class="splash-progress-bar"></div></div>
  </div>
</div>

<!-- ═══════ NAVIGATION ═══════ -->
<nav id="mainNav">
  <div class="nav-brand" onclick="navigateTo('home')">
    <div class="nav-brand-icon">AR</div>XOPFLY
  </div>
  <ul class="nav-links">
    <li><a href="#" data-page="home" class="active" onclick="navigateTo('home');return false;">Home</a></li>
    <li><a href="#" data-page="quiz" onclick="navigateTo('quiz');return false;">Quiz</a></li>
    <li><a href="#" data-page="hotels" onclick="navigateTo('hotels');return false;">Hotels & Cars</a></li>
    <li><a href="#" data-page="social" onclick="navigateTo('social');return false;">Social</a></li>
    <li><a href="#" data-page="about" onclick="navigateTo('about');return false;">About</a></li>
  </ul>
  <div class="nav-right">
    <div class="lang-switcher">
      <button class="lang-btn-nav active" data-lang="en">EN</button>
      <button class="lang-btn-nav" data-lang="fr">FR</button>
      <button class="lang-btn-nav" data-lang="ar">ع</button>
    </div>
    <button class="nav-cta" onclick="navigateTo('quiz')">Take Quiz 🎯</button>
  </div>
  <button class="hamburger" id="hamburger"><span></span><span></span><span></span></button>
</nav>

<!-- Mobile Nav -->
<div class="mobile-nav" id="mobileNav">
  <a href="#" onclick="navigateTo('home');document.getElementById('mobileNav').classList.remove('open')">Home</a>
  <a href="#" onclick="navigateTo('quiz');document.getElementById('mobileNav').classList.remove('open')">Quiz</a>
  <a href="#" onclick="navigateTo('hotels');document.getElementById('mobileNav').classList.remove('open')">Hotels & Cars</a>
  <a href="#" onclick="navigateTo('social');document.getElementById('mobileNav').classList.remove('open')">Social</a>
  <a href="#" onclick="navigateTo('about');document.getElementById('mobileNav').classList.remove('open')">About</a>
  <div class="lang-switcher" style="margin-top:20px">
    <button class="lang-btn-nav active" data-lang="en" onclick="setLanguage('en')">EN</button>
    <button class="lang-btn-nav" data-lang="fr" onclick="setLanguage('fr')">FR</button>
    <button class="lang-btn-nav" data-lang="ar" onclick="setLanguage('ar')">ع</button>
  </div>
</div>

<!-- ═══════ MAIN CONTENT ═══════ -->
<main id="mainContent">
  <div id="page-home"   class="page-section active"></div>
  <div id="page-quiz"   class="page-section"></div>
  <div id="page-hotels" class="page-section"></div>
  <div id="page-social" class="page-section"></div>
  <div id="page-about"  class="page-section"></div>
</main>

<!-- ═══════ FOOTER ═══════ -->
<footer>
  <div class="footer-grid">
    <div>
      <div class="footer-logo">XOPFLY</div>
      <p class="footer-desc">Your AI-powered companion for discovering Tunisia's hidden gems, culture, and history. ARSII'26 Competition.</p>
      <div style="display:flex;align-items:center;gap:10px;margin-top:20px">
        <div class="arsii-logo-circle" style="width:36px;height:36px;border-radius:10px;font-size:12px">AR</div>
        <div>
          <div style="font-family:'Syne',sans-serif;font-size:12px;font-weight:700">ARSII 2026</div>
          <div style="font-size:10px;color:var(--muted)">Competition Partner</div>
        </div>
      </div>
    </div>
    <div>
      <div class="footer-heading">Explore</div>
      <ul class="footer-links">
        <li><a href="#" onclick="navigateTo('home');return false">Home</a></li>
        <li><a href="#" onclick="navigateTo('quiz');return false">Culture Quiz</a></li>
        <li><a href="#" onclick="navigateTo('hotels');return false">Hotels & Cars</a></li>
        <li><a href="#" onclick="navigateTo('social');return false">Social Travel</a></li>
      </ul>
    </div>
    <div>
      <div class="footer-heading">Destinations</div>
      <ul class="footer-links">
        <li><a href="#" onclick="navigateTo('hotels');return false">Tunis</a></li>
        <li><a href="#" onclick="navigateTo('hotels');return false">Sidi Bou Saïd</a></li>
        <li><a href="#" onclick="navigateTo('hotels');return false">Carthage</a></li>
        <li><a href="#" onclick="navigateTo('hotels');return false">Djerba</a></li>
        <li><a href="#" onclick="navigateTo('hotels');return false">Sahara</a></li>
      </ul>
    </div>
    <div>
      <div class="footer-heading">About</div>
      <ul class="footer-links">
        <li><a href="#" onclick="navigateTo('about');return false">About XOPFLY</a></li>
        <li><a href="#" onclick="navigateTo('about');return false">ARSII'26</a></li>
        <li><a href="#" onclick="navigateTo('about');return false">Creator</a></li>
        <li><a href="#" onclick="navigateTo('about');return false">Travel Tips</a></li>
      </ul>
    </div>
  </div>
  <div class="footer-bottom">
    <div>© 2026 XOPFLY · ARSII'26 Competition · Moufez Khadhraoui · FSM</div>
    <div>🤖 Gemini AI · 🗺️ Google Maps · 🔮 AR Ready</div>
  </div>
</footer>

<!-- User Profile Toggle Button -->
<button class="profile-toggle" onclick="toggleProfile()" title="My Profile">👤</button>

<!-- User Profile Side Panel -->
<div class="profile-panel" id="profilePanel">
  <button class="profile-close" onclick="toggleProfile()">✕</button>
  <div style="margin-top:40px">
    <div class="profile-avatar-big" id="profileAvatar">🧑‍💻</div>
    <div style="font-family:'Syne',sans-serif;font-size:22px;font-weight:800" id="profileName">Traveler</div>
    <div style="font-size:12px;color:var(--muted);margin-top:4px" id="profileLevel">🎖️ Explorer Level 3</div>
    <div class="profile-stat-grid">
      <div class="profile-stat"><span class="profile-stat-num" id="profilePoints">1250</span><span class="profile-stat-label">Points</span></div>
      <div class="profile-stat"><span class="profile-stat-num" id="profileTrips">3</span><span class="profile-stat-label">Trips</span></div>
      <div class="profile-stat"><span class="profile-stat-num" id="profileBadges">4</span><span class="profile-stat-label">Badges</span></div>
      <div class="profile-stat"><span class="profile-stat-num" id="profileRank">#7</span><span class="profile-stat-label">Ranking</span></div>
    </div>
    <div class="profile-section-title">Your Interests</div>
    <div id="profilePreferences">
      <span class="preference-chip active" onclick="togglePref(this,'history')">🏛️ History</span>
      <span class="preference-chip active" onclick="togglePref(this,'food')">🍜 Food</span>
      <span class="preference-chip" onclick="togglePref(this,'adventure')">🏔️ Adventure</span>
      <span class="preference-chip" onclick="togglePref(this,'beach')">🏖️ Beach</span>
      <span class="preference-chip" onclick="togglePref(this,'culture')">🎨 Art & Culture</span>
      <span class="preference-chip" onclick="togglePref(this,'eco')">🌿 Eco Travel</span>
      <span class="preference-chip" onclick="togglePref(this,'nightlife')">🌙 Nightlife</span>
    </div>
    <div class="profile-section-title">Budget Range</div>
    <div style="background:var(--glass);border:1px solid var(--border);border-radius:var(--radius-sm);padding:16px">
      <div style="display:flex;justify-content:space-between;margin-bottom:8px">
        <span style="font-size:12px;color:var(--muted)">Daily Budget</span>
        <span style="font-family:'Syne',sans-serif;font-size:14px;font-weight:700;color:var(--gold)" id="profileBudgetVal">150 TND</span>
      </div>
      <input type="range" min="30" max="500" value="150" class="budget-slider" style="width:100%" oninput="document.getElementById('profileBudgetVal').textContent=this.value+' TND'">
    </div>
    <div class="profile-section-title">Past Trips</div>
    <div style="display:flex;flex-direction:column;gap:8px">
      <div style="background:var(--glass);border:1px solid var(--border);border-radius:var(--radius-sm);padding:12px;display:flex;align-items:center;gap:10px">
        <span style="font-size:20px">🏛️</span>
        <div><div style="font-size:12px;font-weight:600">Carthage & Tunis</div><div style="font-size:10px;color:var(--muted)">Jan 2026 · 2 days</div></div>
      </div>
      <div style="background:var(--glass);border:1px solid var(--border);border-radius:var(--radius-sm);padding:12px;display:flex;align-items:center;gap:10px">
        <span style="font-size:20px">🌴</span>
        <div><div style="font-size:12px;font-weight:600">Djerba Island</div><div style="font-size:10px;color:var(--muted)">Dec 2025 · 5 days</div></div>
      </div>
    </div>
    <button class="confirm-btn" onclick="showToast('✅ Profile saved!','success');toggleProfile()" style="margin-top:20px">Save Preferences</button>
  </div>
</div>

<script>
/* ═══════════════════════════════════════════════════════════════
   XOPFLY — Main JavaScript
   Tunisia Tourism App | ARSII'26 Competition
   Author: Moufez Khadhraoui | FSM
   Powered by: Gemini AI + Google Maps API
   ═══════════════════════════════════════════════════════════════ */

/* ─── CONFIGURATION ─── */
const CONFIG = {
  GEMINI_API_KEY: 'AIzaSyBV2CLqBruCWuOW07GFIhiqzhQVfLCu2D8',
  GEMINI_ENDPOINT: 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent'
};

/* ─── STATE ─── */
const STATE = {
  lang: 'en',
  currentPage: 'home',
  quizScore: 0,
  quizQuestion: 0,
  quizDone: false,
  quizAnswers: [],
  userPoints: 1250,
  selectedFilter: 'all',
  carFilter: 'all',
  hotelTab: 'hotels',
  bannerIndex: 0,
  bannerTimer: null,
  aiHistory: [],
  profileOpen: false,
  planDuration: '1day',
  planDestination: '',
};

/* ─── TRANSLATIONS ─── */
const I18N = {
  en: {
    heroBadge: "ARSII'26 · Powered by AI + AR",
    heroH1Line1: 'Discover', heroH1Word: 'Tunisia',
    heroH1Line2: 'Like Never Before',
    heroDesc: "Your AI-powered travel companion for exploring Tunisia's rich culture, history, and hidden gems. Plan smarter, travel better.",
    heroCta1: '✈️ Plan My Trip', heroCta2: 'Take the Quiz →',
    statDest: 'Destinations', statUsers: 'Travelers', statRoutes: 'AI Routes', statLangs: 'Languages',
    featuresTitle: 'Everything You Need', featuresAccent: 'to Explore Tunisia',
    featuresDesc: 'From AI-powered itineraries to social adventures, XOPFLY has it all.',
    f1Title: 'AI Trip Planning', f1Desc: 'Get personalized day-by-day itineraries based on your budget, interests, and travel style.',
    f2Title: 'Cultural Quiz', f2Desc: 'Test your Tunisia knowledge and unlock destination recommendations tailored to your interests.',
    f3Title: 'Hotel & Car Booking', f3Desc: 'Find the perfect stay and ride — from budget to luxury — filtered by your budget.',
    f4Title: 'Social Travel', f4Desc: 'Connect with fellow travelers, join group trips, and earn badges for your adventures.',
    f5Title: 'AR Heritage', f5Desc: "Point your camera at landmarks to unlock immersive AR stories about Tunisia's heritage.",
    f6Title: 'Eco Travel', f6Desc: 'Discover sustainable routes, eco-friendly accommodations, and responsible travel tips.',
    aiPlaceholder: 'Ask me anything about Tunisia...',
    aiGreeting: "👋 Hi! I'm XAI, your Tunisia travel assistant. Ask me about the best places to visit, travel tips, cultural insights, restaurant recommendations, or let me plan your perfect itinerary!",
    bookNow: 'Book Now', rentCar: 'Rent Car', connect: 'Connect', joinTrip: 'Join', points: 'pts',
    nextQ: 'Next Question →', seeResults: 'See My Destinations →', retakeQuiz: '↩ Retake', planTrip: 'Plan This Trip →',
  },
  fr: {
    heroBadge: "ARSII'26 · Propulsé par IA + RA",
    heroH1Line1: 'Découvrez la', heroH1Word: 'Tunisie',
    heroH1Line2: 'Comme Jamais',
    heroDesc: "Votre compagnon de voyage alimenté par l'IA pour explorer la riche culture, l'histoire et les joyaux cachés de la Tunisie.",
    heroCta1: '✈️ Planifier Mon Voyage', heroCta2: 'Faire le Quiz →',
    statDest: 'Destinations', statUsers: 'Voyageurs', statRoutes: 'Itinéraires IA', statLangs: 'Langues',
    featuresTitle: "Tout Ce Qu'il Faut", featuresAccent: 'pour Explorer la Tunisie',
    featuresDesc: "Des itinéraires IA aux aventures sociales, XOPFLY a tout prévu.",
    f1Title: 'Planification IA', f1Desc: "Obtenez des itinéraires personnalisés selon votre budget et vos intérêts.",
    f2Title: 'Quiz Culturel', f2Desc: "Testez vos connaissances sur la Tunisie et débloquez des recommandations.",
    f3Title: 'Hôtel & Voiture', f3Desc: "Trouvez le séjour et le véhicule parfaits, filtrés selon votre budget.",
    f4Title: 'Voyage Social', f4Desc: "Connectez-vous avec d'autres voyageurs et rejoignez des voyages de groupe.",
    f5Title: 'Patrimoine AR', f5Desc: "Pointez votre caméra sur les monuments pour des expériences AR immersives.",
    f6Title: 'Voyage Écologique', f6Desc: "Découvrez des itinéraires durables et des conseils de voyage responsable.",
    aiPlaceholder: "Demandez-moi n'importe quoi sur la Tunisie...",
    aiGreeting: "👋 Bonjour! Je suis XAI, votre assistant voyage Tunisie. Demandez-moi les meilleurs endroits, des conseils ou laissez-moi planifier votre voyage!",
    bookNow: 'Réserver', rentCar: 'Louer', connect: 'Connecter', joinTrip: 'Rejoindre', points: 'pts',
    nextQ: 'Question Suivante →', seeResults: 'Voir Mes Destinations →', retakeQuiz: '↩ Recommencer', planTrip: 'Planifier Ce Voyage →',
  },
  ar: {
    heroBadge: "ARSII'26 · مدعوم بالذكاء الاصطناعي",
    heroH1Line1: 'اكتشف', heroH1Word: 'تونس',
    heroH1Line2: 'كما لم تفعل من قبل',
    heroDesc: "رفيقك الذكي لاستكشاف التراث الثقافي الغني لتونس وتاريخها وكنوزها المخفية.",
    heroCta1: '✈️ خطط لرحلتي', heroCta2: '← خذ المسابقة',
    statDest: 'وجهة', statUsers: 'مسافر', statRoutes: 'مسار ذكي', statLangs: 'لغات',
    featuresTitle: 'كل ما تحتاجه', featuresAccent: 'لاستكشاف تونس',
    featuresDesc: "من خطط الرحلات الذكية إلى المغامرات الاجتماعية، XOPFLY لديه كل شيء.",
    f1Title: 'التخطيط بالذكاء الاصطناعي', f1Desc: "احصل على خطط سفر مخصصة حسب ميزانيتك واهتماماتك.",
    f2Title: 'مسابقة ثقافية', f2Desc: "اختبر معرفتك بتونس واكتشف توصيات الوجهات المناسبة.",
    f3Title: 'الفنادق والسيارات', f3Desc: "ابحث عن أفضل الإقامات والسيارات بأسعار تناسب ميزانيتك.",
    f4Title: 'السفر الاجتماعي', f4Desc: "تواصل مع مسافرين آخرين وانضم إلى رحلات جماعية.",
    f5Title: 'تراث واقع معزز', f5Desc: "وجه كاميرتك نحو المعالم لتجارب AR غامرة.",
    f6Title: 'السفر الأخضر', f6Desc: "اكتشف المسارات المستدامة ونصائح السفر المسؤول.",
    aiPlaceholder: "اسألني أي شيء عن تونس...",
    aiGreeting: "👋 مرحباً! أنا XAI، مساعدك للسفر في تونس. اسألني عن أفضل الأماكن أو دعني أخطط لرحلتك المثالية!",
    bookNow: 'احجز الآن', rentCar: 'استأجر', connect: 'تواصل', joinTrip: 'انضم', points: 'نقطة',
    nextQ: '← السؤال التالي', seeResults: '← شاهد وجهاتي', retakeQuiz: '← إعادة المسابقة', planTrip: '← خطط لهذه الرحلة',
  }
};

/* ─── QUIZ DATA ─── */
const QUIZ_DATA = [
  { q_en:"What ancient civilization founded Carthage in modern Tunisia?", q_fr:"Quelle civilisation antique a fondé Carthage en Tunisie?", q_ar:"أي حضارة قديمة أسست قرطاج في تونس؟", options_en:['Romans','Phoenicians','Greeks','Egyptians'], options_fr:['Romains','Phéniciens','Grecs','Égyptiens'], options_ar:['الرومان','الفينيقيون','الإغريق','المصريون'], correct:1, emoji:'🏛️', fact_en:'Carthage was founded by Phoenician settlers around 814 BC!', fact_fr:'Carthage a été fondée par des Phéniciens vers 814 av. J.-C.!', fact_ar:'تأسست قرطاج على يد الفينيقيين حوالي 814 قبل الميلاد!' },
  { q_en:"What is the name of Tunisia's famous blue-and-white clifftop village?", q_fr:"Comment s'appelle le célèbre village bleu et blanc perché sur une falaise?", q_ar:"ما اسم القرية التونسية الزرقاء والبيضاء الشهيرة على المنحدر؟", options_en:['Hammamet','Sidi Bou Saïd','Monastir','Mahdia'], options_fr:['Hammamet','Sidi Bou Saïd','Monastir','Mahdia'], options_ar:['الحمامات','سيدي بو سعيد','المنستير','المهدية'], correct:1, emoji:'🌊', fact_en:'Sidi Bou Saïd sits 130m above sea level and inspired countless artists!', fact_fr:'Sidi Bou Saïd est à 130m d\'altitude et a inspiré de nombreux artistes!', fact_ar:'يقع سيدي بو سعيد على ارتفاع 130 متراً وألهم كثيراً من الفنانين!' },
  { q_en:"Which Roman amphitheatre in Tunisia is among the world's best preserved?", q_fr:"Quel amphithéâtre romain tunisien est l'un des mieux préservés?", q_ar:"أي مدرج روماني في تونس هو من أفضل المحافظ عليها؟", options_en:['Dougga','Bulla Regia','El Jem','Sbeitla'], options_fr:['Dougga','Bulla Regia','El Jem','Sbeitla'], options_ar:['دقة','بولا ريجيا','الجم','سبيطلة'], correct:2, emoji:'🏟️', fact_en:'The Amphitheatre of El Jem (238 AD) held 35,000 spectators!', fact_fr:"L'amphithéâtre d'El Jem (238 ap. J.-C.) accueillait 35 000 spectateurs!", fact_ar:'مدرج الجم (238 م) كان يتسع لـ 35,000 مشاهد!' },
  { q_en:"What is the iconic Tunisian street food made of crispy pastry and egg?", q_fr:"Quel est le street food tunisien emblématique fait de pâte croustillante et d'œuf?", q_ar:"ما هو الطعام التونسي المشهور المصنوع من العجينة المقرمشة والبيض؟", options_en:['Couscous','Merguez','Brik','Lablabi'], options_fr:['Couscous','Merguez','Brik','Lablabi'], options_ar:['الكسكسي','المرقاز','البريك','اللبلابي'], correct:2, emoji:'🥙', fact_en:"Brik is Tunisia's iconic street food — crispy fried pastry with egg!", fact_fr:"Le brik est le street food emblématique de Tunisie!", fact_ar:'البريك هو أشهر وجبات الشارع التونسية!' },
  { q_en:"Which UNESCO site in Tunisia features underground Berber dwellings used in Star Wars?", q_fr:"Quel site UNESCO en Tunisie comprend des habitations berbères souterraines filmées dans Star Wars?", q_ar:"أي موقع يونسكو في تونس يضم مساكن بربرية تحت الأرض صُوِّر فيها حرب النجوم؟", options_en:['Kairouan','Matmata','Tataouine','Gafsa'], options_fr:['Kairouan','Matmata','Tataouine','Gafsa'], options_ar:['القيروان','مطماطة','تطاوين','قفصة'], correct:1, emoji:'🏠', fact_en:"Matmata's troglodyte houses were filming locations for Star Wars!", fact_fr:"Les maisons troglodytes de Matmata ont servi de décor pour Star Wars!", fact_ar:'استُخدمت منازل مطماطة تحت الأرض كمواقع تصوير لحرب النجوم!' },
  { q_en:"What is the great mosque of Tunisia considered one of the holiest in Islam?", q_fr:"Quelle est la grande mosquée de Tunisie considérée comme l'une des plus saintes de l'Islam?", q_ar:"ما هي المسجد الكبير في تونس الذي يُعدّ من أقدس المساجد في الإسلام؟", options_en:['Zitouna Mosque','El Jem Mosque','Sousse Mosque','Sfax Mosque'], options_fr:['Mosquée Zitouna','Mosquée El Jem','Mosquée Sousse','Mosquée Sfax'], options_ar:['مسجد الزيتونة','مسجد الجم','مسجد سوسة','مسجد صفاقس'], correct:0, emoji:'🕌', fact_en:"The Zitouna Mosque in Tunis is one of Islam's oldest universities!", fact_fr:"La Mosquée Zitouna est l'une des plus anciennes universités de l'Islam!", fact_ar:'مسجد الزيتونة في تونس هو من أقدم الجامعات في الإسلام!' },
];

/* ─── HOTEL DATA ─── */
const HOTELS = [
  { id:1, name:'Dar Ben Gacem', location_en:'Médina de Tunis', location_fr:'Médina de Tunis', location_ar:'المدينة العتيقة تونس', price:90, stars:4, emoji:'🏡', badge:'AI PICK', badgeColor:'var(--teal)', tags_en:['Free WiFi','Breakfast','Eco'], type:'guesthouse', rating:4.9, reviews:312, desc_en:'Authentic 18th-century medina guesthouse with rooftop terrace views.' },
  { id:2, name:'Villa Carthage', location_en:'Sidi Bou Saïd', location_fr:'Sidi Bou Saïd', location_ar:'سيدي بو سعيد', price:65, stars:3, emoji:'🌊', badge:'BEST VALUE', badgeColor:'var(--gold)', tags_en:['Pool','Sea View','Parking'], type:'airbnb', rating:4.7, reviews:208, desc_en:'Seaside villa with stunning Mediterranean views, 5 mins from the beach.' },
  { id:3, name:'Hôtel Maison Blanche', location_en:'La Marsa', location_fr:'La Marsa', location_ar:'المرسى', price:145, stars:5, emoji:'🏰', badge:'LUXURY', badgeColor:'var(--flame)', tags_en:['Spa','Rooftop Bar','Concierge'], type:'luxury', rating:4.8, reviews:445, desc_en:'Boutique luxury hotel with private beach access and award-winning spa.' },
  { id:4, name:'Desert Dreams Camp', location_en:'Douz, Sahara', location_fr:'Douz, Sahara', location_ar:'دوز، الصحراء', price:45, stars:3, emoji:'🏕️', badge:'HIDDEN GEM', badgeColor:'var(--teal)', tags_en:['Camel Tours','Stargazing','Unique'], type:'adventure', rating:4.9, reviews:187, desc_en:'Luxury desert glamping with guided camel treks and Sahara stargazing.' },
  { id:5, name:'Riad Carthage', location_en:'Tunis Centre', location_fr:'Centre de Tunis', location_ar:'وسط تونس', price:80, stars:4, emoji:'🕌', badge:'MOST BOOKED', badgeColor:'var(--ocean)', tags_en:['Hammam','Courtyard','Wifi'], type:'riad', rating:4.6, reviews:523, desc_en:'Traditional riad with ornate courtyard, hammam and authentic Tunisian decor.' },
  { id:6, name:'Djerba Paradise Resort', location_en:'Djerba Island', location_fr:'Île de Djerba', location_ar:'جزيرة جربة', price:110, stars:4, emoji:'🌴', badge:'ISLAND ESCAPE', badgeColor:'var(--teal)', tags_en:['Beach','All Inclusive','Kids Club'], type:'resort', rating:4.5, reviews:789, desc_en:'All-inclusive beach resort on magical Djerba Island with crystal clear waters.' },
];

/* ─── CAR DATA ─── */
const CARS = [
  { id:1, name:'Dacia Logan', brand:'Dacia', price:55, seats:5, transmission:'Manual', fuel:'Petrol', emoji:'🚗', badge:'BEST VALUE', badgeColor:'var(--gold)', category:'economy', tags:['AC','Bluetooth','USB'], rating:4.4, reviews:189, desc:'Reliable and fuel-efficient city car, perfect for exploring coastal Tunisia.' },
  { id:2, name:'Peugeot 208', brand:'Peugeot', price:75, seats:5, transmission:'Automatic', fuel:'Petrol', emoji:'🚙', badge:'POPULAR', badgeColor:'var(--flame)', category:'compact', tags:['AC','GPS','Bluetooth'], rating:4.6, reviews:241, desc:'Stylish compact car with automatic gearbox — ideal for navigating Tunis traffic.' },
  { id:3, name:'Toyota Corolla', brand:'Toyota', price:85, seats:5, transmission:'Automatic', fuel:'Hybrid', emoji:'🚕', badge:'ECO PICK', badgeColor:'var(--teal)', category:'sedan', tags:['AC','GPS','Hybrid','USB'], rating:4.7, reviews:317, desc:'Hybrid sedan offering comfort and great fuel economy for long road trips.' },
  { id:4, name:'Jeep Renegade', brand:'Jeep', price:120, seats:5, transmission:'Automatic', fuel:'Diesel', emoji:'🚐', badge:'OFF-ROAD', badgeColor:'var(--ocean)', category:'suv', tags:['4WD','AC','GPS','Sunroof'], rating:4.8, reviews:152, desc:'Perfect SUV for desert adventures in Tozeur and Douz off the beaten path.' },
  { id:5, name:'Renault Clio', brand:'Renault', price:60, seats:5, transmission:'Manual', fuel:'Petrol', emoji:'🚘', badge:'BUDGET', badgeColor:'var(--teal)', category:'economy', tags:['AC','Radio','USB'], rating:4.3, reviews:208, desc:'Affordable and nimble — great for budget travelers exploring Tunisian cities.' },
  { id:6, name:'Mercedes C-Class', brand:'Mercedes', price:195, seats:5, transmission:'Automatic', fuel:'Petrol', emoji:'🏎️', badge:'LUXURY', badgeColor:'#9B59B6', category:'luxury', tags:['Leather','GPS','Sunroof','AC'], rating:4.9, reviews:97, desc:'Premium executive saloon with full amenities for a stylish Tunisian journey.' },
];

/* ─── BUDDIES DATA ─── */
const BUDDIES = [
  { name:'Alia Mansouri', from_en:'Tunis · 24 yrs', emoji:'👩‍🎓', bg:'linear-gradient(135deg,#FF5733,#FF8C42)', interests:['🏛️ History','📸 Photography','🍜 Food'], points:2840 },
  { name:'Karim Bouazizi', from_en:'Sfax · 28 yrs', emoji:'👨‍💻', bg:'linear-gradient(135deg,#0077B6,#00BFA5)', interests:['🏔️ Hiking','🧗 Adventure','🌿 Eco'], points:1920 },
  { name:'Rim Aouadi', from_en:'Sousse · 22 yrs', emoji:'👩‍🎨', bg:'linear-gradient(135deg,#FFD700,#FF5733)', interests:['🎨 Art','🎵 Music','🌅 Sunsets'], points:3100 },
  { name:'Yassine Trabelsi', from_en:'Monastir · 26 yrs', emoji:'🧑‍🍳', bg:'linear-gradient(135deg,#9B59B6,#3498DB)', interests:['🍽️ Cuisine','🏊 Diving','🎭 Festivals'], points:1580 },
  { name:'Nour Ben Ali', from_en:'Hammamet · 23 yrs', emoji:'👩‍🔬', bg:'linear-gradient(135deg,#00BFA5,#0077B6)', interests:['🌿 Eco','🦋 Nature','🚴 Cycling'], points:2210 },
];

/* ─── LEADERBOARD DATA ─── */
const LEADERBOARD = [
  { name:'Rim Aouadi', pts:3100, emoji:'👩‍🎨', bg:'linear-gradient(135deg,#FFD700,#FF5733)' },
  { name:'Alia Mansouri', pts:2840, emoji:'👩‍🎓', bg:'linear-gradient(135deg,#FF5733,#FF8C42)' },
  { name:'Nour Ben Ali', pts:2210, emoji:'👩‍🔬', bg:'linear-gradient(135deg,#00BFA5,#0077B6)' },
  { name:'Karim Bouazizi', pts:1920, emoji:'👨‍💻', bg:'linear-gradient(135deg,#0077B6,#00BFA5)' },
  { name:'Sara Khemiri', pts:1740, emoji:'👩‍🏫', bg:'linear-gradient(135deg,#9B59B6,#6C3483)' },
  { name:'Yassine Trabelsi', pts:1580, emoji:'🧑‍🍳', bg:'linear-gradient(135deg,#9B59B6,#3498DB)' },
  { name:'You 🌟', pts:1250, emoji:'🧑‍💻', bg:'linear-gradient(135deg,var(--flame),var(--amber))', me:true },
];

/* ─── GROUP TRIPS ─── */
const GROUP_TRIPS = [
  { name_en:'Carthage Explorers', name_fr:'Explorateurs de Carthage', name_ar:'مستكشفو قرطاج', emoji:'🏛️', date:'Mar 20, 2026', members:8, bg:'linear-gradient(135deg,#0077B6,#00BFA5)' },
  { name_en:'Sahara Desert Trek', name_fr:'Trekking du Sahara', name_ar:'رحلة الصحراء', emoji:'🐪', date:'Apr 5, 2026', members:6, bg:'linear-gradient(135deg,#FFD700,#FF5733)' },
  { name_en:'Djerba Beach Week', name_fr:'Semaine Plage Djerba', name_ar:'أسبوع شاطئ جربة', emoji:'🌴', date:'Apr 18, 2026', members:12, bg:'linear-gradient(135deg,#00BFA5,#0077B6)' },
];

/* ─── BANNERS ─── */
const BANNERS = [
  { emoji:'🏛️', tag_en:"TODAY'S PICK", tag_fr:"SÉLECTION DU JOUR", tag_ar:"اختيار اليوم", title_en:'Carthage at Sunset', title_fr:'Carthage au Coucher du Soleil', title_ar:'قرطاج عند الغروب', meta:'⭐ 4.9 · 2h from Tunis · Free entry Sundays', bg:'linear-gradient(135deg,#1a0a3e,#2d1b5e)' },
  { emoji:'🌊', tag_en:"WEEKLY HIGHLIGHT", tag_fr:"COUP DE CŒUR", tag_ar:"تميز الأسبوع", title_en:'Sidi Bou Saïd Village', title_fr:'Village Sidi Bou Saïd', title_ar:'قرية سيدي بو سعيد', meta:'⭐ 4.8 · 30min from Tunis · Best at sunrise', bg:'linear-gradient(135deg,#023e8a,#0077b6)' },
  { emoji:'🏔️', tag_en:"HIDDEN GEM", tag_fr:"PERLE CACHÉE", tag_ar:"جوهرة خفية", title_en:'Matmata Troglodytes', title_fr:'Troglodytes de Matmata', title_ar:'مساكن مطماطة تحت الأرض', meta:'⭐ 4.7 · 7h drive · Star Wars filming location', bg:'linear-gradient(135deg,#3d0e60,#6a1e9f)' },
  { emoji:'🏟️', tag_en:"MUST SEE", tag_fr:"À NE PAS MANQUER", tag_ar:"لا يفوتك", title_en:'Amphitheatre of El Jem', title_fr:"Amphithéâtre d'El Jem", title_ar:'مدرج الجم', meta:'⭐ 4.9 · UNESCO Heritage · 238 AD', bg:'linear-gradient(135deg,#3a0a10,#7a1a22)' },
];

/* ─── BADGES ─── */
const BADGES = [
  { emoji:'🏅', name:'Quiz Master', pts:500, locked:false },
  { emoji:'🌍', name:'Explorer', pts:300, locked:false },
  { emoji:'📸', name:'Photographer', pts:200, locked:false },
  { emoji:'🍜', name:'Foodie', pts:150, locked:false },
  { emoji:'🏔️', name:'Adventurer', pts:400, locked:true },
  { emoji:'👥', name:'Socialite', pts:250, locked:true },
  { emoji:'⭐', name:'Legend', pts:1000, locked:true },
  { emoji:'🎯', name:'Expert', pts:600, locked:true },
];

/* ─── TRAVEL TIPS ─── */
const TIPS = [
  { icon:'💧', title_en:'Stay Hydrated', title_fr:'Restez Hydraté', title_ar:'ابق رطباً', desc_en:'Tunisia\'s summer heat can exceed 40°C in the south. Always carry water and wear sun protection.', desc_fr:'La chaleur estivale en Tunisie peut dépasser 40°C au sud. Portez toujours de l\'eau.', desc_ar:'يمكن أن تتجاوز حرارة الصيف في تونس 40 درجة مئوية جنوباً. احمل المياه دائماً.' },
  { icon:'🧕', title_en:'Dress Respectfully', title_fr:'Habillez-vous Convenablement', title_ar:'ارتدِ ملابس لائقة', desc_en:'When visiting mosques or medinas, cover shoulders and knees. Tunisia is welcoming but conservative in sacred spaces.', desc_fr:'Lors des visites de mosquées, couvrez épaules et genoux.', desc_ar:'عند زيارة المساجد أو المدن العتيقة، احرص على تغطية الكتفين والركبتين.' },
  { icon:'🪙', title_en:'Currency Tips', title_fr:'Conseils Monétaires', title_ar:'نصائح عملة', desc_en:'Use Tunisian Dinar (TND). Exchange at banks for best rates. Many places only accept cash outside Tunis.', desc_fr:'Utilisez le Dinar Tunisien. Échangez en banque pour les meilleurs taux.', desc_ar:'استخدم الدينار التونسي. احرص على الصرف في البنوك للحصول على أفضل الأسعار.' },
  { icon:'🚌', title_en:'Getting Around', title_fr:'Se Déplacer', title_ar:'التنقل', desc_en:'SNCFT trains connect major cities cheaply. Louages (shared taxis) are faster for regional travel.', desc_fr:'Les trains SNCFT relient les grandes villes. Les louages (taxis partagés) sont plus rapides.', desc_ar:'قطارات SNCFT تربط المدن الكبرى. اللواجات (سيارات الأجرة المشتركة) أسرع للسفر بين المناطق.' },
  { icon:'🍽️', title_en:'Local Cuisine', title_fr:'Cuisine Locale', title_ar:'المطبخ المحلي', desc_en:'Try brik, couscous, mechouia salad, and harissa. Street food in medinas is fresh and affordable.', desc_fr:'Essayez la brik, le couscous, la salade mechouia et la harissa.', desc_ar:'جرب البريك والكسكسي والمشوية والهريسة. الطعام في المدن العتيقة طازج وبأسعار معقولة.' },
  { icon:'📱', title_en:'Stay Connected', title_fr:'Restez Connecté', title_ar:'ابق متصلاً', desc_en:'Ooredoo and Tunisie Telecom offer affordable SIM cards. WiFi available in most hotels and cafes.', desc_fr:'Ooredoo et Tunisie Telecom proposent des cartes SIM abordables.', desc_ar:'تقدم أوريدو وتونس تيليكوم بطاقات SIM بأسعار معقولة. الواي فاي متاح في معظم الفنادق.' },
];

/* ═══════════════════════════════════════════════════════════════
   INITIALIZATION
   ═══════════════════════════════════════════════════════════════ */
document.addEventListener('DOMContentLoaded', () => {
  initCursor();
  initSplash();
  initNav();
  initScrollAnimations();
  renderPage('home');
});

/* ─── CURSOR ─── */
function initCursor() {
  const cursor = document.querySelector('.cursor');
  const follower = document.querySelector('.cursor-follower');
  if (!cursor || !follower) return;
  let mouseX = 0, mouseY = 0, followerX = 0, followerY = 0;
  document.addEventListener('mousemove', e => {
    mouseX = e.clientX; mouseY = e.clientY;
    cursor.style.left = mouseX + 'px'; cursor.style.top = mouseY + 'px';
  });
  function animateFollower() {
    followerX += (mouseX - followerX) * 0.12; followerY += (mouseY - followerY) * 0.12;
    follower.style.left = followerX + 'px'; follower.style.top = followerY + 'px';
    requestAnimationFrame(animateFollower);
  }
  animateFollower();
  document.addEventListener('mouseover', e => {
    if (e.target.matches('a,button,[class*="card"],[class*="btn"],[class*="chip"],[class*="option"]')) { cursor.classList.add('hover'); follower.classList.add('hover'); }
  });
  document.addEventListener('mouseout', e => {
    if (e.target.matches('a,button,[class*="card"],[class*="btn"],[class*="chip"],[class*="option"]')) { cursor.classList.remove('hover'); follower.classList.remove('hover'); }
  });
}

/* ─── SPLASH ─── */
function initSplash() {
  // Generate particles
  const container = document.querySelector('.splash-particles');
  if (container) {
    const colors = ['#FF4B1F','#FFB347','#F5C518','#00BFA5','#0077B6'];
    for (let i = 0; i < 40; i++) {
      const p = document.createElement('div');
      p.className = 'particle';
      const size = Math.random() * 8 + 3;
      p.style.cssText = `width:${size}px;height:${size}px;left:${Math.random()*100}%;background:${colors[Math.floor(Math.random()*colors.length)]};animation-duration:${Math.random()*8+6}s;animation-delay:${Math.random()*4}s;`;
      container.appendChild(p);
    }
  }
  setTimeout(() => {
    const splash = document.getElementById('splash-screen');
    if (splash) { splash.classList.add('hidden'); setTimeout(() => splash.style.display='none', 700); }
  }, 3200);
}

/* ─── NAVIGATION ─── */
function initNav() {
  window.addEventListener('scroll', () => {
    const nav = document.querySelector('nav');
    if (nav) nav.classList.toggle('scrolled', window.scrollY > 50);
  });
  document.querySelectorAll('.lang-btn-nav').forEach(btn => btn.addEventListener('click', () => setLanguage(btn.dataset.lang)));
  const hamburger = document.getElementById('hamburger');
  const mobileNav = document.getElementById('mobileNav');
  if (hamburger && mobileNav) hamburger.addEventListener('click', () => mobileNav.classList.toggle('open'));
}

/* ─── LANGUAGE ─── */
function setLanguage(lang) {
  STATE.lang = lang;
  document.body.classList.toggle('rtl', lang === 'ar');
  document.documentElement.lang = lang;
  document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
  document.querySelectorAll('.lang-btn-nav').forEach(b => b.classList.toggle('active', b.dataset.lang === lang));
  renderPage(STATE.currentPage);
  showToast(`🌐 Language: ${lang.toUpperCase()}`, 'info');
}

function t(key) { return (I18N[STATE.lang] || I18N.en)[key] || key; }
function tl(obj, key) { const l = STATE.lang; return obj[key+'_'+l] || obj[key+'_en'] || ''; }

/* ─── PAGE ROUTING ─── */
function navigateTo(page) {
  STATE.currentPage = page;
  document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
  const target = document.getElementById(`page-${page}`);
  if (target) { target.classList.add('active'); window.scrollTo({ top:0, behavior:'smooth' }); }
  document.querySelectorAll('.nav-links a').forEach(a => a.classList.toggle('active', a.dataset.page === page));
  document.getElementById('mobileNav')?.classList.remove('open');
  renderPage(page);
}

function renderPage(page) {
  switch(page) {
    case 'home':   renderHome();   break;
    case 'quiz':   renderQuiz();   break;
    case 'hotels': renderHotels(); break;
    case 'social': renderSocial(); break;
    case 'about':  renderAbout();  break;
  }
  setTimeout(() => initScrollAnimations(), 50);
}

/* ═══════════════════════════════════════════════════════════════
   HOME PAGE
   ═══════════════════════════════════════════════════════════════ */
function renderHome() {
  const page = document.getElementById('page-home');
  if (!page) return;
  const l = STATE.lang;
  page.innerHTML = `
    <!-- HERO -->
    <section class="hero">
      <div class="hero-bg"></div>
      <div class="hero-grid-lines"></div>
      <div class="hero-content">
        <div class="hero-eyebrow reveal"><span class="hero-eyebrow-dot"></span>${t('heroBadge')}</div>
        <h1 class="hero-h1 reveal reveal-delay-1">
          ${t('heroH1Line1')}<br>
          <span class="highlight">${t('heroH1Word')}</span><br>
          <span class="outline-text">${t('heroH1Line2')}</span>
        </h1>
        <p class="hero-desc reveal reveal-delay-2">${t('heroDesc')}</p>
        <div class="hero-btns reveal reveal-delay-3">
          <button class="btn-primary" onclick="navigateTo('hotels')">${t('heroCta1')}</button>
          <button class="btn-secondary" onclick="navigateTo('quiz')">${t('heroCta2')}</button>
        </div>
        <div class="hero-stats reveal reveal-delay-4">
          <div class="stat-item"><span class="stat-num">200+</span><span class="stat-label">${t('statDest')}</span></div>
          <div class="stat-item"><span class="stat-num">12K+</span><span class="stat-label">${t('statUsers')}</span></div>
          <div class="stat-item"><span class="stat-num">500+</span><span class="stat-label">${t('statRoutes')}</span></div>
          <div class="stat-item"><span class="stat-num">3</span><span class="stat-label">${t('statLangs')}</span></div>
        </div>
      </div>
      <div class="hero-visual">
        <div class="hero-card-stack">
          <div class="floating-card main-dest-card">
            <div class="dest-card-img" style="background:linear-gradient(135deg,#1a0a3e,#2d1b5e)">🏛️</div>
            <div class="dest-card-body">
              <div class="dest-card-title">Carthage, Tunis</div>
              <div class="dest-card-meta"><span class="rating">⭐ 4.9</span><span class="text-muted text-sm">UNESCO Heritage</span><span class="text-muted text-sm">2h from center</span></div>
            </div>
          </div>
          <div class="floating-card mini-card card-weather" style="background:rgba(0,119,182,0.2);border-color:rgba(0,119,182,0.3)">
            <div class="mini-card-icon">☀️</div>
            <div class="mini-card-label">Tunis Weather</div>
            <div class="mini-card-value">22°C · Clear</div>
          </div>
          <div class="floating-card mini-card card-activity" style="background:rgba(255,75,31,0.15);border-color:rgba(255,75,31,0.3)">
            <div class="mini-card-icon">🤖</div>
            <div class="mini-card-label">AI Matched</div>
            <div class="mini-card-value">Bardo Museum</div>
          </div>
          <div class="floating-card mini-card card-buddies" style="background:rgba(0,191,165,0.12);border-color:rgba(0,191,165,0.25)">
            <div class="mini-card-icon">👥</div>
            <div class="mini-card-label">Travel Buddy</div>
            <div class="mini-card-value">3 nearby</div>
          </div>
        </div>
      </div>
    </section>

    <!-- DAILY BANNERS -->
    <section class="section-sm" style="padding-top:0">
      <div style="padding:0 80px" class="reveal">
        <div class="section-eyebrow">${l==='fr'?'RECOMMANDATIONS':l==='ar'?'توصيات اليوم':'DAILY RECOMMENDATIONS'}</div>
        <div class="banner-slider" id="bannerSlider">
          ${BANNERS.map((b,i) => `
            <div class="banner-slide ${i===0?'active':''}" style="background:${b.bg}">
              <div class="banner-slide-bg">${b.emoji}</div>
              <div class="banner-slide-overlay"></div>
              <div class="banner-content">
                <div class="banner-tag">${b['tag_'+l]||b.tag_en}</div>
                <h2 class="banner-title">${b['title_'+l]||b.title_en}</h2>
                <div class="banner-meta">
                  <span>${b.meta}</span>
                  <button class="btn-primary" style="padding:8px 20px;font-size:12px" onclick="navigateTo('hotels')">${t('bookNow')}</button>
                </div>
              </div>
            </div>
          `).join('')}
          <div class="banner-dots" id="bannerDots">
            ${BANNERS.map((_,i) => `<div class="banner-dot ${i===0?'active':''}" onclick="goToSlide(${i})"></div>`).join('')}
          </div>
        </div>
      </div>
    </section>

    <!-- FEATURES GRID -->
    <section class="section">
      <div class="section-eyebrow reveal">${l==='fr'?'FONCTIONNALITÉS':l==='ar'?'الميزات':'FEATURES'}</div>
      <h2 class="section-title reveal">${t('featuresTitle')} <span class="accent">${t('featuresAccent')}</span></h2>
      <p class="section-desc reveal">${t('featuresDesc')}</p>
      <div class="features-grid">
        ${[
          { icon:'🤖', bg:'bg-flame', title:t('f1Title'), desc:t('f1Desc'), page:'hotels' },
          { icon:'🎯', bg:'bg-gold',  title:t('f2Title'), desc:t('f2Desc'), page:'quiz' },
          { icon:'🏨', bg:'bg-ocean', title:t('f3Title'), desc:t('f3Desc'), page:'hotels' },
          { icon:'👥', bg:'bg-teal',  title:t('f4Title'), desc:t('f4Desc'), page:'social' },
          { icon:'🔮', bg:'bg-flame', title:t('f5Title'), desc:t('f5Desc'), page:'about' },
          { icon:'🌿', bg:'bg-teal',  title:t('f6Title'), desc:t('f6Desc'), page:'about' },
        ].map((f,i) => `
          <div class="feature-card reveal reveal-delay-${(i%4)+1}" onclick="navigateTo('${f.page}')">
            <div class="feature-icon ${f.bg}"><span style="font-size:26px">${f.icon}</span></div>
            <div class="feature-arrow">→</div>
            <h3 class="feature-card-title">${f.title}</h3>
            <p class="feature-card-desc">${f.desc}</p>
          </div>
        `).join('')}
      </div>
    </section>

    <!-- AI ASSISTANT (Home) -->
    <section class="section" style="padding-top:0">
      <div class="section-eyebrow reveal">AI ASSISTANT</div>
      <h2 class="section-title reveal">${l==='fr'?'Votre Guide IA':l==='ar'?'مساعدك الذكي':'Your AI Travel Guide'} <span class="accent">XAI</span></h2>
      <p class="section-desc reveal">${l==='fr'?'Posez n\'importe quelle question sur la Tunisie — XAI vous répond instantanément avec des conseils personnalisés.':l==='ar'?'اسأل أي شئ عن تونس — XAI يجيبك فوراً بنصائح مخصصة.':'Ask anything about Tunisia — XAI responds instantly with personalized advice.'}</p>
      <div class="ai-assistant reveal">
        <div class="ai-header">
          <div class="ai-avatar">🤖</div>
          <div>
            <div class="ai-name">XAI — Tunisia Travel AI</div>
            <div class="ai-status"><span class="ai-status-dot"></span>${l==='fr'?'En ligne · Propulsé par Gemini':l==='ar'?'متصل · مدعوم من Gemini':'Online · Powered by Gemini AI'}</div>
          </div>
        </div>
        <div class="ai-chat-area" id="aiChatHome">
          <div class="ai-msg"><div class="ai-bubble bot">${t('aiGreeting')}</div></div>
        </div>
        <div class="ai-suggestions" id="aiSuggestionsHome">
          ${['🗺️ Best places in Tunis','🏖️ Hidden beaches','🍜 Must-try foods','🎒 Budget tips','📅 Weekend plan'].map(s => `<span class="ai-suggestion-chip" onclick="sendAISuggestion('${s}','home')">${s}</span>`).join('')}
        </div>
        <div class="ai-input-row">
          <input class="ai-input" id="aiInputHome" type="text" placeholder="${t('aiPlaceholder')}" onkeydown="if(event.key==='Enter')sendAIMsg('home')">
          <button class="ai-send-btn" onclick="sendAIMsg('home')">✈️ ${l==='fr'?'Envoyer':l==='ar'?'إرسال':'Ask'}</button>
        </div>
      </div>
    </section>

    <!-- ITINERARY PLANNER -->
    <section class="section" style="padding-top:0">
      <div class="section-eyebrow reveal">AI ITINERARY</div>
      <h2 class="section-title reveal">${l==='fr'?'Planificateur de Voyage':l==='ar'?'مخطط الرحلة':'Trip Planner'} <span class="accent">${l==='fr'?'Intelligent':l==='ar'?'الذكي':'Powered by AI'}</span></h2>
      <div class="itinerary-planner reveal">
        <div style="margin-bottom:20px">
          <label class="form-label">${l==='fr'?'DESTINATION':l==='ar'?'الوجهة':'DESTINATION'}</label>
          <div style="display:flex;gap:10px;flex-wrap:wrap">
            ${['Tunis','Djerba','Sahara','Sidi Bou Saïd','Sousse','Carthage'].map(d => `
              <button class="plan-opt-btn ${STATE.planDestination===d?'active':''}" onclick="selectDest('${d}',this)">${d}</button>
            `).join('')}
          </div>
        </div>
        <div style="margin-bottom:20px">
          <label class="form-label">${l==='fr'?'DURÉE':l==='ar'?'المدة':'DURATION'}</label>
          <div class="plan-options" id="planDuration">
            <button class="plan-opt-btn ${STATE.planDuration==='1day'?'active':''}" onclick="setPlanDuration('1day',this)">1 Day</button>
            <button class="plan-opt-btn ${STATE.planDuration==='weekend'?'active':''}" onclick="setPlanDuration('weekend',this)">Weekend</button>
            <button class="plan-opt-btn ${STATE.planDuration==='week'?'active':''}" onclick="setPlanDuration('week',this)">Full Week</button>
          </div>
        </div>
        <button class="btn-primary" onclick="generateItinerary()">🗓️ ${l==='fr'?'Générer mon itinéraire':l==='ar'?'إنشاء خطة رحلتي':'Generate My Itinerary'}</button>
        <div class="itinerary-output" id="itineraryOutput"></div>
      </div>
    </section>
  `;
  setTimeout(() => initBannerSlider(), 100);
}

/* Banner Slider */
function initBannerSlider() {
  if (STATE.bannerTimer) clearInterval(STATE.bannerTimer);
  STATE.bannerTimer = setInterval(() => goToSlide((STATE.bannerIndex + 1) % BANNERS.length), 4000);
}
function goToSlide(idx) {
  STATE.bannerIndex = idx;
  document.querySelectorAll('.banner-slide').forEach((s,i) => s.classList.toggle('active', i===idx));
  document.querySelectorAll('.banner-dot').forEach((d,i) => d.classList.toggle('active', i===idx));
}

/* Itinerary Planner */
function selectDest(dest, btn) {
  STATE.planDestination = dest;
  btn.closest('.section, .itinerary-planner').querySelectorAll('.plan-opt-btn').forEach(b => {
    if (b.textContent.trim() === dest) b.classList.add('active');
  });
}
function setPlanDuration(dur, btn) {
  STATE.planDuration = dur;
  document.querySelectorAll('#planDuration .plan-opt-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
}
async function generateItinerary() {
  const dest = STATE.planDestination || 'Tunis';
  const dur = STATE.planDuration;
  const durLabel = dur==='1day'?'1 day':dur==='weekend'?'a weekend':'a full week';
  const output = document.getElementById('itineraryOutput');
  if (!output) return;
  output.classList.add('visible');
  output.innerHTML = `<div style="display:flex;align-items:center;gap:10px;color:var(--muted)"><div class="ai-spinner"></div> Generating your ${durLabel} itinerary for ${dest}...</div>`;
  try {
    const prompt = `Create a detailed travel itinerary for ${durLabel} in ${dest}, Tunisia. Format with Day 1, Day 2 etc. Include morning, afternoon, evening activities. Add restaurant recommendations, local tips, and estimated costs in TND. Keep it concise but informative. Use emojis.`;
    const result = await callGemini(prompt);
    const formatted = result.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/Day (\d+)/g, '<div class="itinerary-day">📅 Day $1</div>').replace(/Morning:|Afternoon:|Evening:/g, m => `<span style="color:var(--amber);font-weight:700">${m}</span>`).replace(/\n/g, '<br>');
    output.innerHTML = `<div style="margin-bottom:16px"><span style="color:var(--gold);font-family:\'Syne\',sans-serif;font-weight:800">🗺️ ${durLabel.toUpperCase()} IN ${dest.toUpperCase()}</span></div>${formatted}`;
  } catch(e) {
    output.innerHTML = getOfflineItinerary(dest, dur);
  }
}

function getOfflineItinerary(dest, dur) {
  const plans = {
    '1day': `<div class="itinerary-day">📅 Day 1 in ${dest}</div>
      <div class="itinerary-item">🌅 <strong>8:00 AM</strong> — Start with breakfast at a local café, try a <em>lablabi</em> or <em>ftira</em></div>
      <div class="itinerary-item">🏛️ <strong>9:30 AM</strong> — Visit the main historical sites</div>
      <div class="itinerary-item">🍜 <strong>1:00 PM</strong> — Lunch at a medina restaurant (try couscous)</div>
      <div class="itinerary-item">📸 <strong>3:00 PM</strong> — Explore local souks and photography spots</div>
      <div class="itinerary-item">🌅 <strong>6:00 PM</strong> — Sunset viewing point</div>
      <div class="itinerary-item">🍽️ <strong>8:00 PM</strong> — Dinner with traditional Tunisian cuisine</div>`,
    'weekend': `<div class="itinerary-day">📅 Day 1 — Arrival & Discovery</div>
      <div class="itinerary-item">🛬 Arrive and check in to your hotel</div>
      <div class="itinerary-item">🏛️ Visit key landmarks and historical sites</div>
      <div class="itinerary-item">🍜 Evening dinner in the medina</div>
      <div class="itinerary-day">📅 Day 2 — Deep Exploration</div>
      <div class="itinerary-item">🌅 Early morning walk through old city</div>
      <div class="itinerary-item">🛍️ Souk shopping and local crafts</div>
      <div class="itinerary-item">🏖️ Afternoon beach or nature visit</div>`,
    'week': `<div class="itinerary-day">📅 Days 1-2 — ${dest} City</div>
      <div class="itinerary-item">🏛️ Medina, museums, historical sites</div>
      <div class="itinerary-day">📅 Days 3-4 — Coast & Islands</div>
      <div class="itinerary-item">🌊 Coastal towns, beaches, seafood</div>
      <div class="itinerary-day">📅 Days 5-6 — Desert & Nature</div>
      <div class="itinerary-item">🐪 Sahara, oases, star gazing</div>
      <div class="itinerary-day">📅 Day 7 — Culture & Farewell</div>
      <div class="itinerary-item">🎭 Local festivals, shopping, farewell dinner</div>`,
  };
  return plans[dur] || plans['1day'];
}

/* ═══════════════════════════════════════════════════════════════
   QUIZ PAGE
   ═══════════════════════════════════════════════════════════════ */
function renderQuiz() {
  const page = document.getElementById('page-quiz');
  if (!page) return;
  const l = STATE.lang;
  if (STATE.quizDone) {
    renderQuizResult(page);
    return;
  }
  const q = QUIZ_DATA[STATE.quizQuestion];
  if (!q) return;
  const pct = (STATE.quizQuestion / QUIZ_DATA.length) * 100;
  const letters = ['A','B','C','D'];
  page.innerHTML = `
    <section class="section">
      <div class="quiz-container">
        <div class="section-eyebrow">${l==='fr'?'QUIZ CULTUREL':l==='ar'?'المسابقة الثقافية':'CULTURAL QUIZ'}</div>
        <h2 class="section-title mb-32">${l==='fr'?'Testez Votre Connaissance':l==='ar'?'اختبر معرفتك':'Test Your Tunisia Knowledge'} <span class="accent">🇹🇳</span></h2>
        <div class="quiz-header-card">
          <div>
            <div style="font-size:11px;color:var(--muted);margin-bottom:6px">${l==='fr'?'QUESTION':l==='ar'?'السؤال':'QUESTION'} ${STATE.quizQuestion+1} / ${QUIZ_DATA.length}</div>
            <div class="quiz-progress-track"><div class="quiz-progress-fill" style="width:${pct}%"></div></div>
          </div>
          <div class="quiz-score-display">⭐ ${STATE.quizScore} ${t('points')}</div>
        </div>
        <div class="question-card">
          <div class="question-num">${l==='fr'?'Question':l==='ar'?'السؤال':'Question'} ${STATE.quizQuestion+1}</div>
          <div class="question-emoji">${q.emoji}</div>
          <div class="question-text">${q['q_'+l] || q.q_en}</div>
        </div>
        <div class="options-grid" id="optionsGrid">
          ${(q['options_'+l] || q.options_en).map((opt,i) => `
            <button class="option-btn" onclick="selectAnswer(${i},this)" id="opt${i}">
              <span class="option-letter">${letters[i]}</span>
              ${opt}
            </button>
          `).join('')}
        </div>
        <div id="answerFeedback" style="display:none"></div>
        <div id="quizNav" style="display:none;margin-top:16px;text-align:right">
          <button class="btn-primary" onclick="${STATE.quizQuestion+1 < QUIZ_DATA.length ? 'nextQuestion()' : 'finishQuiz()'}">
            ${STATE.quizQuestion+1 < QUIZ_DATA.length ? t('nextQ') : t('seeResults')}
          </button>
        </div>
        <!-- Leaderboard preview -->
        <div style="margin-top:48px">
          <div class="section-eyebrow" style="margin-bottom:16px">LEADERBOARD</div>
          <div class="leaderboard">
            ${LEADERBOARD.slice(0,3).map((u,i) => `
              <div class="lb-row ${u.me?'me':''}">
                <span class="lb-rank ${['gold','silver','bronze'][i]}">${['🥇','🥈','🥉'][i]}</span>
                <div class="lb-avatar" style="background:${u.bg}">${u.emoji}</div>
                <span class="lb-name">${u.name}</span>
                <span class="lb-pts">${u.pts.toLocaleString()} pts</span>
              </div>
            `).join('')}
          </div>
        </div>
      </div>
    </section>
  `;
}

function selectAnswer(idx, btn) {
  const q = QUIZ_DATA[STATE.quizQuestion];
  const buttons = document.querySelectorAll('.option-btn');
  buttons.forEach(b => b.disabled = true);
  const correct = idx === q.correct;
  if (correct) {
    btn.classList.add('correct');
    STATE.quizScore += 100;
    STATE.userPoints += 50;
    showToast('✅ Correct! +100 points', 'success');
  } else {
    btn.classList.add('wrong');
    document.getElementById('opt'+q.correct)?.classList.add('correct');
    showToast('❌ Wrong! Better luck next time', 'error');
  }
  STATE.quizAnswers.push({ q: STATE.quizQuestion, correct });
  const feedback = document.getElementById('answerFeedback');
  if (feedback) {
    feedback.style.display = 'block';
    const l = STATE.lang;
    feedback.innerHTML = `
      <div style="background:${correct?'rgba(0,191,165,0.1)':'rgba(255,75,31,0.1)'};border:1px solid ${correct?'var(--teal)':'rgba(255,75,31,0.3)'};border-radius:var(--radius-sm);padding:16px;font-size:13px;line-height:1.7">
        <strong style="color:${correct?'var(--teal)':'var(--flame)'}">${correct?'🎉 Excellent!':'💡 Did you know?'}</strong><br>
        ${q['fact_'+l]||q.fact_en}
      </div>`;
  }
  document.getElementById('quizNav').style.display = 'block';
}

function nextQuestion() {
  STATE.quizQuestion++;
  if (STATE.quizQuestion >= QUIZ_DATA.length) finishQuiz();
  else renderQuiz();
}

function finishQuiz() {
  STATE.quizDone = true;
  STATE.userPoints += STATE.quizScore;
  document.getElementById('profilePoints').textContent = STATE.userPoints;
  renderQuizResult(document.getElementById('page-quiz'));
}

function renderQuizResult(page) {
  const l = STATE.lang;
  const pct = Math.round((STATE.quizScore / (QUIZ_DATA.length * 100)) * 100);
  const grade = pct >= 80 ? '🏆 Expert!' : pct >= 60 ? '🌟 Good Job!' : pct >= 40 ? '📚 Keep Learning!' : '🌱 Beginner';
  const trophy = pct >= 80 ? '🏆' : pct >= 60 ? '🌟' : pct >= 40 ? '📖' : '🌱';
  const destinations = [
    { emoji:'🏛️', name:'Carthage', desc:'Ancient ruins & history' },
    { emoji:'🏟️', name:'El Jem', desc:'Roman amphitheatre marvel' },
    { emoji:'🌊', name:'Sidi Bou Saïd', desc:'Iconic blue & white village' },
    { emoji:'🐪', name:'Sahara (Douz)', desc:'Desert adventure & stars' },
    { emoji:'🕌', name:'Kairouan', desc:'Holy city & architecture' },
    { emoji:'🌴', name:'Djerba Island', desc:'Beach paradise & culture' },
  ];
  page.innerHTML = `
    <section class="section">
      <div class="quiz-container">
        <div class="question-card quiz-result">
          <div class="result-trophy">${trophy}</div>
          <div class="result-score">${STATE.quizScore}</div>
          <div style="font-size:13px;color:var(--muted);letter-spacing:2px;text-transform:uppercase;margin-bottom:4px">Points Earned</div>
          <div style="font-family:'Syne',sans-serif;font-size:24px;font-weight:700;color:var(--flame);margin-bottom:8px">${grade}</div>
          <div class="result-message">${pct}% correct · ${STATE.quizAnswers.filter(a=>a.correct).length}/${QUIZ_DATA.length} questions right</div>
          <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
            <button class="btn-primary" onclick="resetQuiz()">↩ ${t('retakeQuiz')}</button>
            <button class="btn-secondary" onclick="navigateTo('hotels')">${t('planTrip')}</button>
          </div>
        </div>
        <div style="margin-top:32px">
          <div class="section-eyebrow" style="margin-bottom:20px">${l==='fr'?'DESTINATIONS RECOMMANDÉES':l==='ar'?'الوجهات المقترحة':'AI RECOMMENDED DESTINATIONS'}</div>
          <div class="result-destinations">
            ${destinations.slice(0,3).map(d => `
              <div class="result-dest-card" onclick="navigateTo('hotels')">
                <div class="result-dest-emoji">${d.emoji}</div>
                <div class="result-dest-name">${d.name}</div>
                <div class="result-dest-desc">${d.desc}</div>
              </div>
            `).join('')}
          </div>
        </div>
        <!-- Full leaderboard -->
        <div style="margin-top:48px">
          <div class="section-eyebrow mb-20">GLOBAL LEADERBOARD</div>
          <div class="leaderboard">
            <div class="lb-header">
              <span style="font-family:'Syne',sans-serif;font-weight:700">Top Travelers</span>
              <span style="font-size:11px;color:var(--muted)">Updated live</span>
            </div>
            ${LEADERBOARD.map((u,i) => `
              <div class="lb-row ${u.me?'me':''}">
                <span class="lb-rank ${i===0?'gold':i===1?'silver':i===2?'bronze':''}">${i===0?'🥇':i===1?'🥈':i===2?'🥉':'#'+(i+1)}</span>
                <div class="lb-avatar" style="background:${u.bg}">${u.emoji}</div>
                <span class="lb-name">${u.name}</span>
                <span class="lb-pts">${u.pts.toLocaleString()} pts</span>
              </div>
            `).join('')}
          </div>
        </div>
      </div>
    </section>`;
}

function resetQuiz() {
  STATE.quizScore = 0; STATE.quizQuestion = 0; STATE.quizDone = false; STATE.quizAnswers = [];
  renderQuiz();
}

/* ═══════════════════════════════════════════════════════════════
   HOTELS & CARS PAGE
   ═══════════════════════════════════════════════════════════════ */
function renderHotels() {
  const page = document.getElementById('page-hotels');
  if (!page) return;
  const l = STATE.lang;
  page.innerHTML = `
    <section class="section">
      <div class="section-eyebrow reveal">${l==='fr'?'HÉBERGEMENT & TRANSPORT':l==='ar'?'الإقامة والتنقل':'ACCOMMODATION & TRANSPORT'}</div>
      <h2 class="section-title reveal">${l==='fr'?'Hôtels & Voitures':l==='ar'?'الفنادق والسيارات':'Hotels & Cars'} <span class="accent">Tunisia</span></h2>
      <p class="section-desc reveal">${l==='fr'?'AI recommande les meilleures options selon votre budget et style de voyage.':l==='ar'?'يوصي الذكاء الاصطناعي بأفضل الخيارات حسب ميزانيتك وأسلوب سفرك.':'AI recommends the best options based on your budget and travel style.'}</p>

      <!-- TABS -->
      <div class="page-tabs reveal">
        <button class="page-tab-btn ${STATE.hotelTab==='hotels'?'active':''}" onclick="switchTab('hotels',this)">🏨 ${l==='fr'?'Hôtels':l==='ar'?'الفنادق':'Hotels'}</button>
        <button class="page-tab-btn ${STATE.hotelTab==='cars'?'active':''}" onclick="switchTab('cars',this)">🚗 ${l==='fr'?'Voitures':l==='ar'?'السيارات':'Cars'}</button>
      </div>

      <div id="hotelTabContent">
        ${STATE.hotelTab === 'hotels' ? renderHotelTab(l) : renderCarTab(l)}
      </div>

      <!-- AI Recommendation -->
      <div class="ai-rec-banner reveal">
        <div class="ai-icon">🤖</div>
        <div style="flex:1">
          <h4>${l==='fr'?'COMBINAISON AI PARFAITE':l==='ar'?'التوصية المثالية بالذكاء الاصطناعي':'AI PERFECT COMBINATION'}</h4>
          <div id="aiRecText">
            <div style="display:flex;align-items:center;gap:8px;color:var(--muted);font-size:13px"><div class="ai-spinner"></div>${l==='fr'?'Analyse de votre profil...':l==='ar'?'تحليل ملفك الشخصي...':'Analyzing your profile...'}</div>
          </div>
        </div>
        <button class="btn-primary" style="padding:10px 20px;font-size:12px" onclick="getAIRec()">🤖 ${l==='fr'?'Rafraîchir':l==='ar'?'تحديث':'Refresh'}</button>
      </div>

      <!-- Map -->
      <div class="map-placeholder reveal">
        <div style="position:absolute;top:16px;left:20px;font-family:'Syne',sans-serif;font-size:13px;font-weight:700;opacity:0.5">📍 Tunisia Map</div>
        <div style="position:absolute;inset:0;background:linear-gradient(135deg,rgba(0,119,182,0.06),rgba(0,191,165,0.04));display:grid;grid-template-columns:repeat(4,1fr);align-items:center;padding:40px;gap:20px">
          ${[{emoji:'🏛️',label:'Carthage'},{emoji:'🌊',label:'Sidi Bou Saïd'},{emoji:'🏟️',label:'El Jem'},{emoji:'🌴',label:'Djerba'},{emoji:'🐪',label:'Sahara'},{emoji:'🕌',label:'Kairouan'},{emoji:'🏝️',label:'Hammamet'},{emoji:'⛵',label:'Mahdia'}].map(pin => `
            <div class="map-pin">
              <div class="map-pin-icon"><div class="map-pin-icon-inner">${pin.emoji}</div></div>
              <div class="map-pin-label">${pin.label}</div>
            </div>
          `).join('')}
        </div>
        <div style="position:absolute;bottom:16px;right:20px;font-size:11px;color:rgba(255,255,255,0.15)">Google Maps Integration</div>
      </div>
    </section>
  `;
  setTimeout(() => getAIRec(), 500);
}

function renderHotelTab(l) {
  const maxBudget = 300;
  return `
    <div class="budget-input-wrap reveal">
      <label>${l==='fr'?'Budget max/nuit':l==='ar'?'الميزانية القصوى/ليلة':'Max budget/night'}</label>
      <input type="range" class="budget-slider" min="30" max="${maxBudget}" value="200" id="budgetSlider"
        oninput="updateBudget(this.value)">
      <div class="budget-value" id="budgetVal">200 TND</div>
    </div>
    <div class="hotel-filters reveal">
      ${[{id:'all',label:'🌍 All'},{id:'guesthouse',label:'🏡 Guesthouse'},{id:'luxury',label:'✨ Luxury'},{id:'airbnb',label:'🏠 Airbnb'},{id:'resort',label:'🌴 Resort'},{id:'adventure',label:'🏕️ Adventure'},{id:'riad',label:'🕌 Riad'}].map(f => `
        <div class="filter-chip ${STATE.selectedFilter===f.id?'active':''}" onclick="setHotelFilter('${f.id}',this)">${f.label}</div>
      `).join('')}
    </div>
    <div class="hotels-grid" id="hotelsGrid">
      ${renderHotelCards(l)}
    </div>
  `;
}

function renderHotelCards(l) {
  const maxBudget = parseInt(document.getElementById('budgetSlider')?.value || 500);
  return HOTELS.filter(h => h.type === STATE.selectedFilter || STATE.selectedFilter === 'all').filter(h => h.price <= maxBudget).map(h => `
    <div class="hotel-card reveal">
      <div class="hotel-img" style="background:linear-gradient(135deg,#0d1b3e,#1a3a5c)">
        <span>${h.emoji}</span>
        <div class="hotel-badge" style="background:${h.badgeColor};color:#fff">${h.badge}</div>
      </div>
      <div class="hotel-body">
        <div class="hotel-name">${h.name}</div>
        <div class="hotel-location">📍 ${h['location_'+l]||h.location_en}</div>
        <div class="hotel-row">
          <div class="hotel-price">${h.price} TND <span>/ ${l==='fr'?'nuit':l==='ar'?'ليلة':'night'}</span></div>
          <div class="hotel-stars">${'★'.repeat(h.stars)}${'☆'.repeat(5-h.stars)}</div>
        </div>
        <div style="font-size:11px;color:var(--muted);margin-bottom:8px">⭐ ${h.rating} · ${h.reviews} ${l==='fr'?'avis':l==='ar'?'تقييم':'reviews'}</div>
        <div style="font-size:12px;color:var(--muted);line-height:1.5;margin-bottom:10px">${h['desc_'+l]||h.desc_en}</div>
        <div class="hotel-tags">${(h['tags_'+l]||h.tags_en||[]).map(tag=>`<span class="hotel-tag">${tag}</span>`).join('')}</div>
        <button class="hotel-book-btn" onclick="showBookingModal('hotel','${h.name}',${h.price})">${t('bookNow')} →</button>
      </div>
    </div>
  `).join('') || `<div style="grid-column:1/-1;text-align:center;padding:60px;color:var(--muted)">No hotels found for your budget. Try increasing your budget. 💡</div>`;
}

function renderCarTab(l) {
  return `
    <div class="hotel-filters reveal">
      ${[{id:'all',label:'🚗 All'},{id:'economy',label:'💰 Economy'},{id:'compact',label:'🚙 Compact'},{id:'sedan',label:'🚕 Sedan'},{id:'suv',label:'🚐 SUV'},{id:'luxury',label:'🏎️ Luxury'}].map(f => `
        <div class="filter-chip ${STATE.carFilter===f.id?'active':''}" onclick="setCarFilter('${f.id}',this)">${f.label}</div>
      `).join('')}
    </div>
    <div class="cars-grid" id="carsGrid">
      ${CARS.filter(c => c.category === STATE.carFilter || STATE.carFilter === 'all').map(c => `
        <div class="car-card reveal">
          <div class="car-img">
            <span style="position:relative;z-index:1">${c.emoji}</span>
            <div class="car-badge" style="background:${c.badgeColor}">${c.badge}</div>
          </div>
          <div class="car-body">
            <div class="car-name">${c.name}</div>
            <div class="car-brand">${c.brand}</div>
            <div class="car-specs">
              <span class="car-spec">👥 ${c.seats} seats</span>
              <span class="car-spec">⚙️ ${c.transmission}</span>
              <span class="car-spec">⛽ ${c.fuel}</span>
            </div>
            <div class="car-row">
              <div class="car-price">${c.price} TND <span>/ day</span></div>
              <div style="font-size:11px;color:var(--muted)">⭐ ${c.rating} · ${c.reviews} reviews</div>
            </div>
            <div style="font-size:12px;color:var(--muted);line-height:1.5;margin-bottom:10px">${c.desc}</div>
            <div class="car-tags">${c.tags.map(tag=>`<span class="car-tag">${tag}</span>`).join('')}</div>
            <button class="car-rent-btn" onclick="showBookingModal('car','${c.name}',${c.price})">${t('rentCar')} →</button>
          </div>
        </div>
      `).join('')}
    </div>
  `;
}

function switchTab(tab, btn) {
  STATE.hotelTab = tab;
  document.querySelectorAll('.page-tab-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  const l = STATE.lang;
  const content = document.getElementById('hotelTabContent');
  if (content) content.innerHTML = tab === 'hotels' ? renderHotelTab(l) : renderCarTab(l);
  setTimeout(() => initScrollAnimations(), 50);
}

function setHotelFilter(filter, el) {
  STATE.selectedFilter = filter;
  document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
  el.classList.add('active');
  const grid = document.getElementById('hotelsGrid');
  if (grid) grid.innerHTML = renderHotelCards(STATE.lang);
}

function setCarFilter(filter, el) {
  STATE.carFilter = filter;
  document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
  el.classList.add('active');
  const l = STATE.lang;
  const grid = document.getElementById('carsGrid');
  if (grid) grid.innerHTML = CARS.filter(c => c.category === filter || filter === 'all').map(c => `
    <div class="car-card">
      <div class="car-img"><span style="position:relative;z-index:1">${c.emoji}</span><div class="car-badge" style="background:${c.badgeColor}">${c.badge}</div></div>
      <div class="car-body">
        <div class="car-name">${c.name}</div><div class="car-brand">${c.brand}</div>
        <div class="car-specs"><span class="car-spec">👥 ${c.seats} seats</span><span class="car-spec">⚙️ ${c.transmission}</span><span class="car-spec">⛽ ${c.fuel}</span></div>
        <div class="car-row"><div class="car-price">${c.price} TND <span>/ day</span></div><div style="font-size:11px;color:var(--muted)">⭐ ${c.rating}</div></div>
        <div class="car-tags">${c.tags.map(tag=>`<span class="car-tag">${tag}</span>`).join('')}</div>
        <button class="car-rent-btn" onclick="showBookingModal('car','${c.name}',${c.price})">${t('rentCar')} →</button>
      </div>
    </div>
  `).join('');
}

function updateBudget(val) {
  const display = document.getElementById('budgetVal');
  if (display) display.textContent = val + ' TND';
  const slider = document.getElementById('budgetSlider');
  if (slider) { const pct = (val - 30) / (300 - 30) * 100; slider.style.background = `linear-gradient(90deg, var(--flame) ${pct}%, var(--border) ${pct}%)`; }
  const grid = document.getElementById('hotelsGrid');
  if (grid) grid.innerHTML = renderHotelCards(STATE.lang);
}

async function getAIRec() {
  const el = document.getElementById('aiRecText');
  if (!el) return;
  el.innerHTML = `<div style="display:flex;align-items:center;gap:8px;color:var(--muted);font-size:13px"><div class="ai-spinner"></div>Analyzing best combination...</div>`;
  try {
    const prompt = `Recommend the perfect hotel + car combination for a budget traveler visiting Tunisia for a weekend. Choose from: Hotels: Dar Ben Gacem (90 TND/night), Villa Carthage (65 TND/night), Desert Dreams Camp (45 TND/night). Cars: Dacia Logan (55 TND/day), Renault Clio (60 TND/day). Explain why this is the best combo. Keep it under 100 words. Use emojis.`;
    const result = await callGemini(prompt);
    el.innerHTML = `<p style="font-size:13px;color:var(--muted);line-height:1.8">${result}</p>`;
  } catch(e) {
    el.innerHTML = `<p style="font-size:13px;color:var(--muted);line-height:1.8">🌟 <strong>Perfect Combo:</strong> <span style="color:var(--gold)">Villa Carthage (65 TND/night)</span> + <span style="color:var(--ocean)">Dacia Logan (55 TND/day)</span> = Best value for a Tunisia weekend! Seaside views + reliable city car. Total estimated weekend cost: ~320 TND. Perfect for first-time visitors! 🇹🇳</p>`;
  }
}

/* ═══════════════════════════════════════════════════════════════
   SOCIAL PAGE
   ═══════════════════════════════════════════════════════════════ */
function renderSocial() {
  const page = document.getElementById('page-social');
  if (!page) return;
  const l = STATE.lang;
  page.innerHTML = `
    <section class="section">
      <div class="section-eyebrow reveal">${l==='fr'?'VOYAGE SOCIAL':l==='ar'?'السفر الاجتماعي':'SOCIAL TRAVEL'}</div>
      <h2 class="section-title reveal">${l==='fr'?'Voyagez':l==='ar'?'سافر':'Travel'} <span class="accent">${l==='fr'?'Ensemble':l==='ar'?'معاً':'Together'}</span></h2>
      <p class="section-desc reveal">${l==='fr'?'Connectez-vous avec des voyageurs partageant vos intérêts et rejoignez des aventures de groupe inoubliables.':l==='ar'?'تواصل مع مسافرين يشاركونك اهتماماتك وانضم إلى مغامرات جماعية لا تُنسى.':'Connect with like-minded travelers and join unforgettable group adventures in Tunisia.'}</p>

      <!-- BADGES -->
      <div class="section-eyebrow reveal" style="margin-bottom:16px">${l==='fr'?'VOS BADGES':l==='ar'?'شاراتك':'YOUR BADGES'}</div>
      <div class="badge-grid mb-48 reveal">
        ${BADGES.map(b => `
          <div class="badge-item ${b.locked?'locked':''}">
            <div class="badge-emoji">${b.emoji}</div>
            <div class="badge-name">${b.name}</div>
            <div class="badge-pts">+${b.pts} ${t('points')}</div>
          </div>
        `).join('')}
      </div>

      <!-- TRAVEL BUDDIES -->
      <div class="section-eyebrow reveal" style="margin-bottom:16px">AI MATCHED BUDDIES</div>
      <h3 style="font-family:'Syne',sans-serif;font-size:24px;font-weight:700;margin-bottom:32px" class="reveal">${l==='fr'?'Compagnons de voyage':l==='ar'?'رفاق السفر':'Travel Companions'}</h3>
      <div style="display:flex;flex-direction:column;gap:16px;margin-bottom:48px">
        ${BUDDIES.map(b => `
          <div class="buddy-card reveal">
            <div class="buddy-avatar" style="background:${b.bg}">${b.emoji}</div>
            <div class="buddy-info">
              <div class="buddy-name">${b.name}</div>
              <div class="buddy-meta">📍 ${b.from_en} · ⭐ ${b.points.toLocaleString()} pts</div>
              <div class="buddy-interests">${b.interests.map(i=>`<span class="interest-chip">${i}</span>`).join('')}</div>
            </div>
            <button class="connect-btn" onclick="connectBuddy('${b.name}')">${t('connect')}</button>
          </div>
        `).join('')}
      </div>

      <!-- AI BUDDY MATCH -->
      <div class="ai-assistant reveal mb-48">
        <div class="ai-header">
          <div class="ai-avatar">🤖</div>
          <div>
            <div class="ai-name">${l==='fr'?'Recommandation Sociale IA':l==='ar'?'توصية اجتماعية بالذكاء الاصطناعي':'AI Social Matching'}</div>
            <div class="ai-status"><span class="ai-status-dot"></span>${l==='fr'?'Analyse de compatibilité':l==='ar'?'تحليل التوافق':'Analyzing compatibility'}</div>
          </div>
        </div>
        <div class="ai-chat-area" id="aiChatSocial">
          <div class="ai-msg"><div class="ai-bubble bot">👥 Hi! I'm finding your perfect travel buddies based on your interests in 🏛️ History and 🍜 Food. <strong>Alia Mansouri</strong> is your best match — she loves photography and Tunisian food too! Want me to suggest a group trip for you both?</div></div>
        </div>
        <div class="ai-suggestions">
          <span class="ai-suggestion-chip" onclick="sendAISuggestion('Find me buddies interested in history','social')">🏛️ History lovers</span>
          <span class="ai-suggestion-chip" onclick="sendAISuggestion('Suggest a group Sahara trip','social')">🐪 Sahara group</span>
          <span class="ai-suggestion-chip" onclick="sendAISuggestion('Who is going to Djerba next month?','social')">🌴 Djerba trip</span>
        </div>
        <div class="ai-input-row">
          <input class="ai-input" id="aiInputSocial" type="text" placeholder="${l==='fr'?'Trouvez des compagnons...':l==='ar'?'ابحث عن رفاق...':'Find travel buddies...'}" onkeydown="if(event.key==='Enter')sendAIMsg('social')">
          <button class="ai-send-btn" onclick="sendAIMsg('social')">🤝 ${l==='fr'?'Chercher':l==='ar'?'بحث':'Match'}</button>
        </div>
      </div>

      <!-- GROUP TRIPS -->
      <div class="section-eyebrow reveal" style="margin-bottom:16px">${l==='fr'?'VOYAGES DE GROUPE':l==='ar'?'الرحلات الجماعية':'GROUP TRIPS'}</div>
      <h3 style="font-family:'Syne',sans-serif;font-size:24px;font-weight:700;margin-bottom:32px" class="reveal">${l==='fr'?'Rejoindre une Aventure':l==='ar'?'انضم إلى مغامرة':'Join an Adventure'}</h3>
      <div class="grid-3 mb-48 reveal">
        ${GROUP_TRIPS.map(trip => `
          <div class="group-trip-card">
            <div class="group-trip-bg" style="background:${trip.bg}">${trip.emoji}</div>
            <div class="group-trip-overlay">
              <div class="group-trip-name">${trip['name_'+l]||trip.name_en}</div>
              <div class="group-trip-meta">📅 ${trip.date} · 👥 ${trip.members} members</div>
            </div>
            <button class="join-btn" onclick="joinTrip('${trip.name_en}')">${t('joinTrip')}</button>
          </div>
        `).join('')}
      </div>

      <!-- LEADERBOARD -->
      <div class="section-eyebrow reveal" style="margin-bottom:16px">SOCIAL LEADERBOARD</div>
      <div class="leaderboard reveal">
        <div class="lb-header">
          <span style="font-family:'Syne',sans-serif;font-weight:700">${l==='fr'?'Classement Global':l==='ar'?'الترتيب العالمي':'Global Ranking'}</span>
          <span style="font-size:11px;color:var(--muted)">${l==='fr'?'Cette semaine':l==='ar'?'هذا الأسبوع':'This week'}</span>
        </div>
        ${LEADERBOARD.map((u,i) => `
          <div class="lb-row ${u.me?'me':''}">
            <span class="lb-rank ${i===0?'gold':i===1?'silver':i===2?'bronze':''}">${i===0?'🥇':i===1?'🥈':i===2?'🥉':'#'+(i+1)}</span>
            <div class="lb-avatar" style="background:${u.bg}">${u.emoji}</div>
            <span class="lb-name">${u.name}${u.me?' (You)':''}</span>
            <span class="lb-pts">${u.pts.toLocaleString()} pts</span>
          </div>
        `).join('')}
      </div>
    </section>
  `;
}

function connectBuddy(name) {
  showToast(`🤝 Connection request sent to ${name}!`, 'success');
  STATE.userPoints += 25;
}

function joinTrip(trip) {
  showToast(`✈️ You joined: ${trip}! +200 pts`, 'success');
  STATE.userPoints += 200;
}

/* ═══════════════════════════════════════════════════════════════
   ABOUT PAGE
   ═══════════════════════════════════════════════════════════════ */
function renderAbout() {
  const page = document.getElementById('page-about');
  if (!page) return;
  const l = STATE.lang;
  page.innerHTML = `
    <section class="section">
      <!-- Hero -->
      <div class="about-hero reveal">
        <div class="about-arsii-logo">AR</div>
        <div class="about-title">XOPFLY</div>
        <div class="about-competition">🏆 ARSII'26 Competition</div>
        <p class="about-desc">An AI-powered Tunisia tourism app — Your smart companion for exploring the rich culture, history, and hidden gems of Tunisia.</p>
      </div>

      <!-- Multi-language description -->
      <div class="mb-48 reveal">
        <div class="lang-tabs">
          <button class="lang-tab active" onclick="switchAboutLang('en',this)">EN</button>
          <button class="lang-tab" onclick="switchAboutLang('fr',this)">FR</button>
          <button class="lang-tab" onclick="switchAboutLang('ar',this)">ع</button>
        </div>
        <div class="about-lang-content active" id="about-en">
          <p><strong>XOPFLY</strong> is an AI-powered tourism application created for the <strong>ARSII'26 competition</strong> by <strong>Moufez Khadhraoui</strong>, a student at <strong>FSM (Faculté des Sciences de Monastir)</strong>.</p><br>
          <p>The app revolutionizes how travelers discover and experience Tunisia's rich cultural heritage, history, and natural landscapes. Using <strong>Gemini AI</strong> for intelligent suggestions, <strong>Google Maps API</strong> for interactive mapping, and immersive AR for cultural landmarks — XOPFLY makes every trip unforgettable.</p><br>
          <p>Features include: AI itinerary planning, cultural quizzes, hotel & car booking, social travel matching, AR heritage exploration, and full trilingual support (English, French, Arabic).</p>
        </div>
        <div class="about-lang-content" id="about-fr">
          <p><strong>XOPFLY</strong> est une application touristique alimentée par l'IA, créée pour la <strong>compétition ARSII'26</strong> par <strong>Moufez Khadhraoui</strong>, étudiant à la <strong>FSM (Faculté des Sciences de Monastir)</strong>.</p><br>
          <p>L'application révolutionne la façon dont les voyageurs découvrent le riche patrimoine culturel de la Tunisie. Grâce à <strong>Gemini AI</strong>, <strong>Google Maps API</strong> et la réalité augmentée immersive, XOPFLY rend chaque voyage inoubliable.</p><br>
          <p>Fonctionnalités : planification IA d'itinéraires, quiz culturels, réservation hôtels & voitures, voyage social, exploration AR du patrimoine, et support trilingue complet.</p>
        </div>
        <div class="about-lang-content" id="about-ar" dir="rtl" style="font-family:'Noto Sans Arabic',sans-serif">
          <p><strong>XOPFLY</strong> هو تطبيق سياحي مدعوم بالذكاء الاصطناعي، تم إنشاؤه لـ <strong>مسابقة ARSII'26</strong> بواسطة <strong>مفيض خضراوي</strong>، طالب في <strong>كلية علوم منستير (FSM)</strong>.</p><br>
          <p>يهدف التطبيق إلى إحداث ثورة في طريقة اكتشاف المسافرين للتراث الثقافي الغني لتونس. باستخدام <strong>Gemini AI</strong> و<strong>Google Maps API</strong> والواقع المعزز الغامر، يجعل XOPFLY كل رحلة لا تُنسى.</p><br>
          <p>الميزات: تخطيط رحلات بالذكاء الاصطناعي، مسابقات ثقافية، حجز فنادق وسيارات، سفر اجتماعي، استكشاف تراث بالواقع المعزز، ودعم ثلاثي اللغة.</p>
        </div>
      </div>

      <!-- Creator Card -->
      <div class="reveal mb-48">
        <div style="background:var(--glass);border:1px solid var(--border);border-radius:var(--radius-lg);padding:32px;display:flex;align-items:center;gap:24px;flex-wrap:wrap">
          <div style="width:72px;height:72px;border-radius:50%;background:linear-gradient(135deg,var(--flame),var(--amber));display:flex;align-items:center;justify-content:center;font-size:28px;flex-shrink:0">👨‍💻</div>
          <div style="flex:1">
            <div style="font-size:11px;color:var(--muted);letter-spacing:2px;text-transform:uppercase;margin-bottom:6px">CREATOR</div>
            <div style="font-family:'Syne',sans-serif;font-size:22px;font-weight:800">Moufez Khadhraoui</div>
            <div style="font-size:13px;color:var(--muted);margin-top:4px">🎓 Student · FSM (Faculté des Sciences de Monastir)</div>
            <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
              <span style="padding:4px 12px;background:rgba(255,75,31,0.1);border:1px solid rgba(255,75,31,0.2);border-radius:100px;font-size:11px;color:var(--flame)">🤖 Gemini AI</span>
              <span style="padding:4px 12px;background:rgba(0,119,182,0.1);border:1px solid rgba(0,119,182,0.2);border-radius:100px;font-size:11px;color:var(--ocean)">🗺️ Google Maps</span>
              <span style="padding:4px 12px;background:rgba(0,191,165,0.1);border:1px solid rgba(0,191,165,0.2);border-radius:100px;font-size:11px;color:var(--teal)">🔮 AR Ready</span>
            </div>
          </div>
          <div style="text-align:center;flex-shrink:0">
            <div class="arsii-logo-circle" style="margin:0 auto 8px;width:56px;height:56px;font-size:18px">AR</div>
            <div style="font-size:10px;color:var(--muted);font-weight:700">ARSII'26</div>
          </div>
        </div>
      </div>

      <!-- Technology Stack -->
      <div class="section-eyebrow reveal" style="margin-bottom:20px">TECHNOLOGY</div>
      <div class="grid-4 reveal mb-48">
        ${[{emoji:'🤖',name:'Gemini AI',desc:'Smart recommendations & chat'},{emoji:'🗺️',name:'Google Maps',desc:'Interactive maps & routes'},{emoji:'🔮',name:'AR Engine',desc:'Cultural landmark experiences'},{emoji:'🌍',name:'i18n',desc:'Arabic · French · English'}].map(tech => `
          <div style="background:var(--glass);border:1px solid var(--border);border-radius:var(--radius);padding:20px;text-align:center">
            <div style="font-size:32px;margin-bottom:10px">${tech.emoji}</div>
            <div style="font-family:'Syne',sans-serif;font-size:14px;font-weight:700;margin-bottom:6px">${tech.name}</div>
            <div style="font-size:11px;color:var(--muted)">${tech.desc}</div>
          </div>
        `).join('')}
      </div>

      <!-- Travel Tips -->
      <div class="section-eyebrow reveal" style="margin-bottom:20px">TRAVEL TIPS</div>
      <h3 style="font-family:'Syne',sans-serif;font-size:28px;font-weight:700;margin-bottom:32px" class="reveal">${l==='fr'?'Conseils de Voyage':l==='ar'?'نصائح السفر':'Traveling Tunisia Wisely'}</h3>
      <div class="grid-2 reveal mb-48">
        ${TIPS.map(tip => `
          <div class="tip-card">
            <div class="tip-icon">${tip.icon}</div>
            <div>
              <div class="tip-title">${tip['title_'+l]||tip.title_en}</div>
              <div class="tip-text">${tip['desc_'+l]||tip.desc_en}</div>
            </div>
          </div>
        `).join('')}
      </div>

      <!-- AR Section -->
      <div style="background:linear-gradient(135deg,rgba(0,119,182,0.1),rgba(0,191,165,0.06));border:1px solid rgba(0,119,182,0.2);border-radius:var(--radius-lg);padding:48px;text-align:center" class="reveal">
        <div style="font-size:64px;margin-bottom:20px">🔮</div>
        <h3 style="font-family:'Syne',sans-serif;font-size:28px;font-weight:800;margin-bottom:12px">AR Heritage Experience</h3>
        <p style="color:var(--muted);font-size:14px;max-width:500px;margin:0 auto 24px;line-height:1.8">${l==='fr'?'Pointez votre caméra sur les monuments pour révéler des expériences AR immersives, des informations historiques et des vues à 360°.':l==='ar'?'وجّه كاميرتك نحو المعالم للكشف عن تجارب الواقع المعزز والمعلومات التاريخية والمناظر بزاوية 360 درجة.':'Point your camera at landmarks to reveal immersive AR experiences, historical information, and 360° views.'}</p>
        <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
          ${['🏛️ Carthage','🕌 Zitouna Mosque','🏟️ El Jem','🏡 Sidi Bou Saïd','🐪 Matmata','🏰 Bardo Museum'].map(loc => `
            <div style="padding:8px 18px;background:rgba(0,119,182,0.15);border:1px solid rgba(0,119,182,0.3);border-radius:100px;font-size:12px;font-weight:600;cursor:pointer;transition:all 0.2s" onclick="showToast('🔮 AR Experience: '+this.textContent.split(' ').slice(1).join(' ')+'!','info')">${loc}</div>
          `).join('')}
        </div>
      </div>

      <!-- Version footer -->
      <div style="text-align:center;margin-top:64px;padding:32px;border-top:1px solid var(--border)" class="reveal">
        <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:32px;background:linear-gradient(135deg,var(--flame),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:8px">XOPFLY</div>
        <div style="font-size:11px;color:rgba(255,255,255,0.15);letter-spacing:2px;line-height:2">v2.0.0 · ARSII'26 Competition<br>Created by Moufez Khadhraoui · FSM · Powered by Gemini AI<br>APIs: Gemini AI · Google Maps · AR Framework</div>
      </div>
    </section>
  `;
}

function switchAboutLang(lang, btn) {
  document.querySelectorAll('.lang-tab').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  document.querySelectorAll('.about-lang-content').forEach(c => c.classList.remove('active'));
  const target = document.getElementById(`about-${lang}`);
  if (target) target.classList.add('active');
}

/* ═══════════════════════════════════════════════════════════════
   GEMINI AI INTEGRATION
   ═══════════════════════════════════════════════════════════════ */

/* Call Gemini API with context-aware system prompt */
async function callGemini(prompt, systemContext = '') {
  const systemPrompt = `You are XAI, the AI assistant for XOPFLY — an AI-powered Tunisia tourism app created for ARSII'26 competition by Moufez Khadhraoui from FSM. You are an expert on Tunisian tourism, culture, history, food, and travel tips. ${systemContext} Always be helpful, concise, and use emojis. Respond in the same language as the user's question.`;
  
  const response = await fetch(`${CONFIG.GEMINI_ENDPOINT}?key=${CONFIG.GEMINI_API_KEY}`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      contents: [{ parts: [{ text: `${systemPrompt}\n\nUser: ${prompt}` }] }],
      generationConfig: { temperature: 0.7, maxOutputTokens: 512 }
    })
  });
  
  if (!response.ok) throw new Error('API error');
  const data = await response.json();
  return data.candidates?.[0]?.content?.parts?.[0]?.text || 'I couldn\'t generate a response. Please try again.';
}

/* Send AI message from chat inputs */
async function sendAIMsg(section) {
  const inputId = `aiInput${section.charAt(0).toUpperCase()+section.slice(1)}`;
  const chatId = `aiChat${section.charAt(0).toUpperCase()+section.slice(1)}`;
  const input = document.getElementById(inputId);
  const chat = document.getElementById(chatId);
  if (!input || !chat || !input.value.trim()) return;
  
  const msg = input.value.trim();
  input.value = '';
  
  // Add user message
  chat.innerHTML += `<div class="ai-msg user"><div class="ai-bubble user">${msg}</div></div>`;
  
  // Add typing indicator
  const typingId = 'typing_' + Date.now();
  chat.innerHTML += `<div class="ai-msg" id="${typingId}"><div class="ai-bubble bot"><div class="ai-typing"><span></span><span></span><span></span></div></div></div>`;
  chat.scrollTop = chat.scrollHeight;
  
  try {
    const context = section === 'social' ? 'Focus on finding travel buddies, group trips, and social travel features in Tunisia.' : 'Focus on Tunisia tourism, travel planning, hotels, and cultural experiences.';
    const result = await callGemini(msg, context);
    const typingEl = document.getElementById(typingId);
    if (typingEl) typingEl.innerHTML = `<div class="ai-bubble bot">${result.replace(/\n/g,'<br>')}</div>`;
  } catch(e) {
    const typingEl = document.getElementById(typingId);
    if (typingEl) typingEl.innerHTML = `<div class="ai-bubble bot">🔌 I'm having trouble connecting. Please check your internet and try again! Meanwhile, you can ask me about Carthage, Sidi Bou Saïd, Djerba, or Sahara adventures.</div>`;
  }
  chat.scrollTop = chat.scrollHeight;
}

function sendAISuggestion(text, section) {
  const inputId = `aiInput${section.charAt(0).toUpperCase()+section.slice(1)}`;
  const input = document.getElementById(inputId);
  if (input) { input.value = text; sendAIMsg(section); }
}

/* ═══════════════════════════════════════════════════════════════
   BOOKING MODAL
   ═══════════════════════════════════════════════════════════════ */
function showBookingModal(type, name, price) {
  const l = STATE.lang;
  const isHotel = type === 'hotel';
  showModal(`
    <div style="text-align:center;margin-bottom:28px">
      <div style="font-size:40px;margin-bottom:12px">${isHotel?'🏨':'🚗'}</div>
      <div style="font-family:'Syne',sans-serif;font-size:22px;font-weight:800;margin-bottom:4px">${name}</div>
      <div style="font-size:14px;color:var(--muted)">${price} TND / ${isHotel?'night':'day'}</div>
    </div>
    <div class="form-group">
      <label class="form-label">YOUR NAME</label>
      <input class="form-input" type="text" placeholder="Full name" id="bookName">
    </div>
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">${isHotel?'CHECK IN':'PICKUP DATE'}</label>
        <input class="form-input" type="date" id="bookDate1" min="${new Date().toISOString().split('T')[0]}">
      </div>
      <div class="form-group">
        <label class="form-label">${isHotel?'CHECK OUT':'RETURN DATE'}</label>
        <input class="form-input" type="date" id="bookDate2">
      </div>
    </div>
    ${isHotel ? `
    <div class="form-group">
      <label class="form-label">ROOM TYPE</label>
      <select class="form-select" id="bookRoom">
        <option>Standard Room</option><option>Deluxe Room</option><option>Suite</option>
      </select>
    </div>
    ` : `
    <div class="form-group">
      <label class="form-label">PICKUP LOCATION</label>
      <select class="form-select" id="bookLocation">
        <option>Tunis Airport</option><option>Tunis City Center</option><option>Sousse</option><option>Sfax</option><option>Djerba Airport</option>
      </select>
    </div>
    `}
    <div class="form-group">
      <label class="form-label">SPECIAL REQUESTS</label>
      <input class="form-input" type="text" placeholder="Any special requests..." id="bookRequests">
    </div>
    <div style="background:rgba(255,75,31,0.08);border:1px solid rgba(255,75,31,0.15);border-radius:var(--radius-sm);padding:16px;margin-bottom:20px">
      <div style="font-size:11px;color:var(--muted);margin-bottom:8px">BOOKING SUMMARY</div>
      <div style="display:flex;justify-content:space-between;font-size:13px">
        <span>${name}</span><span style="font-weight:700;color:var(--gold)">${price} TND</span>
      </div>
      <div style="font-size:11px;color:var(--muted);margin-top:6px">✅ Free cancellation · 🔒 Secure booking · 🇹🇳 Verified</div>
    </div>
    <button class="confirm-btn" onclick="confirmBooking('${name}')">✅ Confirm Booking — ${price} TND</button>
  `);
}

function confirmBooking(name) {
  closeModal();
  STATE.userPoints += 150;
  showToast(`🎉 Booking confirmed: ${name}! +150 pts`, 'success');
  setTimeout(() => showToast('📧 Confirmation sent to your email', 'info'), 1500);
}

/* ═══════════════════════════════════════════════════════════════
   PROFILE PANEL
   ═══════════════════════════════════════════════════════════════ */
function toggleProfile() {
  STATE.profileOpen = !STATE.profileOpen;
  document.getElementById('profilePanel').classList.toggle('open', STATE.profileOpen);
}

function togglePref(el, pref) {
  el.classList.toggle('active');
}

/* ═══════════════════════════════════════════════════════════════
   MODAL & TOAST
   ═══════════════════════════════════════════════════════════════ */
function showModal(html) {
  let modal = document.getElementById('globalModal');
  if (!modal) {
    modal = document.createElement('div');
    modal.id = 'globalModal';
    modal.className = 'modal-backdrop';
    document.body.appendChild(modal);
    modal.addEventListener('click', e => { if (e.target === modal) closeModal(); });
  }
  modal.innerHTML = `<div class="modal-box" style="position:relative"><button class="modal-close" onclick="closeModal()">✕</button>${html}</div>`;
  requestAnimationFrame(() => modal.classList.add('show'));
}

function closeModal() {
  const modal = document.getElementById('globalModal');
  if (modal) { modal.classList.remove('show'); setTimeout(() => modal.remove(), 300); }
}

function showToast(msg, type = 'info') {
  let container = document.querySelector('.toast-container');
  if (!container) { container = document.createElement('div'); container.className = 'toast-container'; document.body.appendChild(container); }
  const toast = document.createElement('div');
  toast.className = 'toast';
  const icons = { success:'✅', error:'❌', info:'💡', warning:'⚠️' };
  toast.style.borderLeftColor = type==='success'?'var(--teal)':type==='error'?'var(--flame)':type==='warning'?'var(--amber)':'var(--gold)';
  toast.innerHTML = `<span style="font-size:18px">${icons[type]||'💡'}</span><span>${msg}</span>`;
  container.appendChild(toast);
  setTimeout(() => { toast.style.opacity='0'; toast.style.transform='translateX(40px)'; toast.style.transition='all 0.3s'; setTimeout(() => toast.remove(), 300); }, 3500);
}

/* ─── SCROLL ANIMATIONS ─── */
function initScrollAnimations() {
  const reveals = document.querySelectorAll('.reveal:not(.visible)');
  const observer = new IntersectionObserver(entries => {
    entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('visible'); observer.unobserve(e.target); } });
  }, { threshold: 0.08, rootMargin: '0px 0px -30px 0px' });
  reveals.forEach(el => observer.observe(el));
}
</script>
</body>
</html>
